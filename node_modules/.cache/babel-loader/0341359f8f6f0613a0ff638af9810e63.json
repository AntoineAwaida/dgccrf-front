{"ast":null,"code":"import _objectSpread from \"/Users/antoine/Documents/DGCCRF/dgccrf-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/visiteCreation/createVisite.container.js\";\n\n/* eslint-disable no-undef */\nimport React from 'react';\nimport { Form, Grid, GridRow, GridColumn, TextArea, Button, Message, Container, Checkbox } from 'semantic-ui-react';\nimport { DateInput } from 'semantic-ui-calendar-react';\nimport { PropTypes } from 'prop-types';\nimport { changeNameOfPage, changeBackUrl, changeActivePage } from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport PouchDbServices from '../../services';\nimport ControleComponent from './controles.container';\nlet visitesService = PouchDbServices.services.visite;\nlet dossierService = PouchDbServices.services.dossier;\n\nfunction mapStateToProps(state) {\n  return {\n    agentIdent: state.dataReducer.AGENT_DD_IDENT\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: newName => dispatch(changeNameOfPage(newName)),\n    changeBackUrl: newBackUrl => dispatch(changeBackUrl(newBackUrl)),\n    changeActivePage: value => dispatch(changeActivePage('mesDossiers', value))\n  };\n}\n\nclass CreateVisiteComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.displayTrame = () => {\n      if (this.props.match.params.dossierId) {\n        return React.createElement(Form.Group, {\n          style: {\n            margin: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          style: {\n            width: '100%',\n            margin: 0\n          },\n          verticalAlign: \"bottom\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(GridRow, {\n          style: {\n            display: 'flex'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(Grid.Column, {\n          width: 16,\n          style: {\n            padding: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(Form.Select, {\n          fluid: true,\n          placeholder: \"Trame\",\n          label: \"Trame associ\\xE9e\",\n          style: {\n            width: '100%'\n          },\n          options: this.state.trameList.map(trame => ({\n            key: trame._id,\n            text: trame.name,\n            value: trame\n          })),\n          onChange: (e, {\n            value\n          }) => this.setState({\n            trame: value\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        })))));\n      }\n    };\n\n    this.displayMessage = message => {\n      if (message) {\n        return React.createElement(Message, {\n          fluid: true,\n          negative: true,\n          onDismiss: () => this.setState({\n            message: ''\n          }),\n          style: {\n            marginTop: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(Message.Header, {\n          style: {\n            marginBottom: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, \"Validation Impossible\"), React.createElement(Message.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, message));\n      }\n    };\n\n    this.onSubmit = () => {\n      if (this.testEntries()) {\n        if (this.props.match.params.visiteId) {\n          visitesService.updateVisite(_objectSpread({}, this.state.visite, {\n            ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n            ETOB_SIRET: this.state.ETOB_SIRET,\n            VIS_DATE: this.state.VIS_DATE,\n            VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n            VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n            VIS_CPMM: this.state.VIS_CPMM,\n            trame: this.state.trame,\n            AG_IDENT: this.props.agentIdent\n          }), this.state.controlesList).then(() => {\n            window.alert('La visite a bien été modifiée.');\n            this.props.history.push('/dossier/' + this.state.DOSSIER_IDENT);\n          });\n        } else {\n          visitesService.postControlesByVisite({\n            ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n            ETOB_SIRET: this.state.ETOB_SIRET,\n            VIS_DATE: this.state.VIS_DATE,\n            VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n            VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n            VIS_CPMM: this.state.VIS_CPMM,\n            trame: this.state.trame,\n            AG_IDENT: this.props.agentIdent\n          }, this.state.controlesList).then(() => {\n            window.alert('La visite a bien été ajoutée.');\n            this.props.history.push('/dossier/' + this.props.match.params.dossierId);\n          });\n        }\n      }\n    };\n\n    this.state = {\n      VIS_CPMM: false,\n      VIS_MUTUALISEE: false,\n      VIS_DATE: '',\n      ETOB_RAISON_SOCIALE: '',\n      ETOB_SIRET: '',\n      VIS_OBSERVATIONS: '',\n      trame: '',\n      trameList: [{\n        _id: 0,\n        name: 'Aucune trame'\n      }],\n      controlesList: [],\n      message: '',\n      DOSSIER_IDENT: -1,\n      dossierText: '',\n      visiteIdent: undefined,\n      visite: undefined\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.match.params.visiteId) {\n      //Si on est sur la page de modification de visite\n      this.props.changeNameOfPage('Modification de visite');\n      this.props.changeBackUrl('/visite/' + this.props.match.params.visiteId.toString());\n      this.props.changeActivePage('/modify-visite/' + this.props.match.params.visiteId);\n      const visite = await visitesService.getVisiteById(this.props.match.params.visiteId);\n      const controles = await visitesService.getControlesByVisite(this.props.match.params.visiteId);\n      const dossier = await dossierService.getDossierById(controles[0].DOSSIER_IDENT);\n      let controlesList = [];\n\n      for (let i in controles) {\n        const dossierControle = await dossierService.getDossierById(controles[i].DOSSIER_IDENT);\n        controlesList = controlesList.concat([_objectSpread({}, controles[i], {\n          dossierText: dossierControle.DOSSIER_LIBELLE,\n          activiteText: controles[i].ACDG_CODE_LIB_NIVEAU3,\n          ident: controles[i].CONTROLE_IDENT,\n          exists: true\n        })]);\n      }\n\n      this.setState(_objectSpread({}, visite, {\n        trameList: ['trame 1', 'trame 2'],\n        controlesList,\n        message: '',\n        dossierText: dossier.DOSSIER_LIBELLE,\n        visiteIdent: visite.VISITE_IDENT,\n        DOSSIER_IDENT: dossier.DOSSIER_IDENT,\n        visite\n      }));\n    } else {\n      this.props.changeNameOfPage('Création de visite');\n      this.props.changeBackUrl('/dossier/' + this.props.match.params.dossierId);\n      this.props.changeActivePage('/nouvelle-visite/' + this.props.match.params.dossierId);\n      PouchDbServices.services.trame.getAllDocs().then(res => {\n        this.setState({\n          trameList: this.state.trameList.concat(res)\n        });\n      }).catch(() => {});\n      const dossier = await dossierService.getDossierById(this.props.match.params.dossierId);\n      this.setState({\n        dossierText: dossier.DOSSIER_LIBELLE,\n        DOSSIER_IDENT: parseInt(this.props.match.params.dossierId)\n      });\n    }\n  }\n\n  testEntries() {\n    if (!this.state.ETOB_RAISON_SOCIALE || !this.state.VIS_DATE || !this.state.trame) {\n      this.setState({\n        message: \"Veillez renseigner l'ensemble des champs obligatoires\"\n      });\n      return false;\n    }\n\n    if (this.state.ETOB_SIRET.length !== 14) {\n      this.setState({\n        message: \"Le numéro SIRET renseigné n'est pas valide : il doit être composé de 14 chiffres\"\n      });\n      return false;\n    }\n\n    if (this.state.controlesList.length === 0) {\n      this.setState({\n        message: 'Veuillez rentrer au moins un contrôle. Vous pourrez le modifier par la suite si besoin'\n      });\n      return false;\n    }\n\n    return true;\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.displayMessage(this.state.message), React.createElement(Grid, {\n      style: {\n        margin: 'auto',\n        textAlign: 'left'\n      },\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(GridRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(GridColumn, {\n      width: 14,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      control: Checkbox,\n      label: \"CPMM\",\n      onClick: () => this.setState({\n        VIS_CPMM: !this.state.VIS_CPMM\n      }),\n      checked: this.state.VIS_CPMM,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      control: Checkbox,\n      label: \"Visite Mutualis\\xE9e\",\n      onClick: () => this.setState({\n        VIS_MUTUALISEE: !this.state.VIS_MUTUALISEE\n      }),\n      checked: this.state.VIS_MUTUALISEE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(DateInput, {\n      label: \"Date de la visite\",\n      name: \"date\",\n      placeholder: \"Date de la visite\",\n      required: true,\n      value: this.state.VIS_DATE,\n      iconPosition: \"right\",\n      onChange: (event, {\n        value\n      }) => this.setState({\n        VIS_DATE: value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      required: true,\n      label: \"Etablissement\",\n      placeholder: \"Raison Sociale\",\n      onChange: e => this.setState({\n        ETOB_RAISON_SOCIALE: e.target.value\n      }),\n      value: this.state.ETOB_RAISON_SOCIALE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      fluid: true,\n      required: true,\n      label: \"SIRET\",\n      placeholder: \"SIRET\",\n      onChange: e => this.setState({\n        ETOB_SIRET: e.target.value\n      }),\n      value: this.state.ETOB_SIRET,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    })), this.displayTrame(), React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      width: 16,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(TextArea, {\n      placeholder: \"Observations\",\n      onChange: e => this.setState({\n        VIS_OBSERVATIONS: e.target.value\n      }),\n      value: this.state.VIS_OBSERVATIONS,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    })))), React.createElement(ControleComponent, {\n      dossier: {\n        id: this.state.DOSSIER_IDENT,\n        text: this.state.dossierText\n      },\n      controles: this.state.controlesList,\n      changeControle: controlesList => this.setState({\n        controlesList\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }), React.createElement(Button, {\n      style: {\n        marginTop: '20px'\n      },\n      onClick: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, \"Valider\")))));\n  }\n\n}\n\nCreateVisiteComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired,\n  agentIdent: PropTypes.number.isRequired,\n  history: PropTypes.any,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      dossierId: PropTypes.string,\n      visiteId: PropTypes.string\n    })\n  })\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateVisiteComponent);","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/visiteCreation/createVisite.container.js"],"names":["React","Form","Grid","GridRow","GridColumn","TextArea","Button","Message","Container","Checkbox","DateInput","PropTypes","changeNameOfPage","changeBackUrl","changeActivePage","connect","PouchDbServices","ControleComponent","visitesService","services","visite","dossierService","dossier","mapStateToProps","state","agentIdent","dataReducer","AGENT_DD_IDENT","mapDispatchToProps","dispatch","newName","newBackUrl","value","CreateVisiteComponent","Component","constructor","props","displayTrame","match","params","dossierId","margin","width","display","padding","trameList","map","trame","key","_id","text","name","e","setState","displayMessage","message","marginTop","marginBottom","onSubmit","testEntries","visiteId","updateVisite","ETOB_RAISON_SOCIALE","ETOB_SIRET","VIS_DATE","VIS_OBSERVATIONS","VIS_MUTUALISEE","VIS_CPMM","AG_IDENT","controlesList","then","window","alert","history","push","DOSSIER_IDENT","postControlesByVisite","dossierText","visiteIdent","undefined","componentDidMount","toString","getVisiteById","controles","getControlesByVisite","getDossierById","i","dossierControle","concat","DOSSIER_LIBELLE","activiteText","ACDG_CODE_LIB_NIVEAU3","ident","CONTROLE_IDENT","exists","VISITE_IDENT","getAllDocs","res","catch","parseInt","length","render","textAlign","event","target","id","propTypes","func","isRequired","number","any","shape","string"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,IADF,EAEEC,IAFF,EAGEC,OAHF,EAIEC,UAJF,EAKEC,QALF,EAMEC,MANF,EAOEC,OAPF,EAQEC,SARF,EASEC,QATF,QAUO,mBAVP;AAWA,SAASC,SAAT,QAA0B,4BAA1B;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SACEC,gBADF,EAEEC,aAFF,EAGEC,gBAHF,QAIO,mBAJP;AAKA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,eAAP,MAA4B,gBAA5B;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,IAAIC,cAAc,GAAGF,eAAe,CAACG,QAAhB,CAAyBC,MAA9C;AACA,IAAIC,cAAc,GAAGL,eAAe,CAACG,QAAhB,CAAyBG,OAA9C;;AAEA,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAC9B,SAAO;AACLC,IAAAA,UAAU,EAAED,KAAK,CAACE,WAAN,CAAkBC;AADzB,GAAP;AAGD;;AAED,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AACpC,SAAO;AACLjB,IAAAA,gBAAgB,EAAEkB,OAAO,IAAID,QAAQ,CAACjB,gBAAgB,CAACkB,OAAD,CAAjB,CADhC;AAELjB,IAAAA,aAAa,EAAEkB,UAAU,IAAIF,QAAQ,CAAChB,aAAa,CAACkB,UAAD,CAAd,CAFhC;AAGLjB,IAAAA,gBAAgB,EAAEkB,KAAK,IAAIH,QAAQ,CAACf,gBAAgB,CAAC,aAAD,EAAgBkB,KAAhB,CAAjB;AAH9B,GAAP;AAKD;;AAED,MAAMC,qBAAN,SAAoCjC,KAAK,CAACkC,SAA1C,CAAoD;AAClDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAsFnBC,YAtFmB,GAsFJ,MAAM;AACnB,UAAI,KAAKD,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBC,SAA5B,EAAuC;AACrC,eACE,oBAAC,IAAD,CAAM,KAAN;AAAY,UAAA,KAAK,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE,MAAT;AAAiBD,YAAAA,MAAM,EAAE;AAAzB,WAAb;AAA2C,UAAA,aAAa,EAAC,QAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,OAAD;AAAS,UAAA,KAAK,EAAE;AAAEE,YAAAA,OAAO,EAAE;AAAX,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD,CAAM,MAAN;AAAa,UAAA,KAAK,EAAE,EAApB;AAAwB,UAAA,KAAK,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD,CAAM,MAAN;AACE,UAAA,KAAK,MADP;AAEE,UAAA,WAAW,EAAC,OAFd;AAGE,UAAA,KAAK,EAAC,mBAHR;AAIE,UAAA,KAAK,EAAE;AAAEF,YAAAA,KAAK,EAAE;AAAT,WAJT;AAKE,UAAA,OAAO,EAAE,KAAKlB,KAAL,CAAWqB,SAAX,CAAqBC,GAArB,CAAyBC,KAAK,KAAK;AAC1CC,YAAAA,GAAG,EAAED,KAAK,CAACE,GAD+B;AAE1CC,YAAAA,IAAI,EAAEH,KAAK,CAACI,IAF8B;AAG1CnB,YAAAA,KAAK,EAAEe;AAHmC,WAAL,CAA9B,CALX;AAUE,UAAA,QAAQ,EAAE,CAACK,CAAD,EAAI;AAAEpB,YAAAA;AAAF,WAAJ,KAAkB,KAAKqB,QAAL,CAAc;AAAEN,YAAAA,KAAK,EAAEf;AAAT,WAAd,CAV9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF,CADF,CADF,CADF;AAsBD;AACF,KA/GkB;;AAAA,SAgHnBsB,cAhHmB,GAgHFC,OAAO,IAAI;AAC1B,UAAIA,OAAJ,EAAa;AACX,eACE,oBAAC,OAAD;AACE,UAAA,KAAK,MADP;AAEE,UAAA,QAAQ,MAFV;AAGE,UAAA,SAAS,EAAE,MAAM,KAAKF,QAAL,CAAc;AAAEE,YAAAA,OAAO,EAAE;AAAX,WAAd,CAHnB;AAIE,UAAA,KAAK,EAAE;AAAEC,YAAAA,SAAS,EAAE;AAAb,WAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAME,oBAAC,OAAD,CAAS,MAAT;AAAgB,UAAA,KAAK,EAAE;AAAEC,YAAAA,YAAY,EAAE;AAAhB,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCANF,EASE,oBAAC,OAAD,CAAS,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAkBF,OAAlB,CATF,CADF;AAaD;AACF,KAhIkB;;AAAA,SA8JnBG,QA9JmB,GA8JR,MAAM;AACf,UAAI,KAAKC,WAAL,EAAJ,EAAwB;AACtB,YAAI,KAAKvB,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBqB,QAA5B,EAAsC;AACpC1C,UAAAA,cAAc,CACX2C,YADH,mBAGS,KAAKrC,KAAL,CAAWJ,MAHpB;AAIM0C,YAAAA,mBAAmB,EAAE,KAAKtC,KAAL,CAAWsC,mBAJtC;AAKMC,YAAAA,UAAU,EAAE,KAAKvC,KAAL,CAAWuC,UAL7B;AAMMC,YAAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAWwC,QAN3B;AAOMC,YAAAA,gBAAgB,EAAE,KAAKzC,KAAL,CAAWyC,gBAPnC;AAQMC,YAAAA,cAAc,EAAE,KAAK1C,KAAL,CAAW0C,cARjC;AASMC,YAAAA,QAAQ,EAAE,KAAK3C,KAAL,CAAW2C,QAT3B;AAUMpB,YAAAA,KAAK,EAAE,KAAKvB,KAAL,CAAWuB,KAVxB;AAWMqB,YAAAA,QAAQ,EAAE,KAAKhC,KAAL,CAAWX;AAX3B,cAaI,KAAKD,KAAL,CAAW6C,aAbf,EAeGC,IAfH,CAeQ,MAAM;AACVC,YAAAA,MAAM,CAACC,KAAP,CAAa,gCAAb;AACA,iBAAKpC,KAAL,CAAWqC,OAAX,CAAmBC,IAAnB,CAAwB,cAAc,KAAKlD,KAAL,CAAWmD,aAAjD;AACD,WAlBH;AAmBD,SApBD,MAoBO;AACLzD,UAAAA,cAAc,CACX0D,qBADH,CAEI;AACEd,YAAAA,mBAAmB,EAAE,KAAKtC,KAAL,CAAWsC,mBADlC;AAEEC,YAAAA,UAAU,EAAE,KAAKvC,KAAL,CAAWuC,UAFzB;AAGEC,YAAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAWwC,QAHvB;AAIEC,YAAAA,gBAAgB,EAAE,KAAKzC,KAAL,CAAWyC,gBAJ/B;AAKEC,YAAAA,cAAc,EAAE,KAAK1C,KAAL,CAAW0C,cAL7B;AAMEC,YAAAA,QAAQ,EAAE,KAAK3C,KAAL,CAAW2C,QANvB;AAOEpB,YAAAA,KAAK,EAAE,KAAKvB,KAAL,CAAWuB,KAPpB;AAQEqB,YAAAA,QAAQ,EAAE,KAAKhC,KAAL,CAAWX;AARvB,WAFJ,EAYI,KAAKD,KAAL,CAAW6C,aAZf,EAcGC,IAdH,CAcQ,MAAM;AACVC,YAAAA,MAAM,CAACC,KAAP,CAAa,+BAAb;AACA,iBAAKpC,KAAL,CAAWqC,OAAX,CAAmBC,IAAnB,CACE,cAAc,KAAKtC,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBC,SADxC;AAGD,WAnBH;AAoBD;AACF;AACF,KA3MkB;;AAEjB,SAAKhB,KAAL,GAAa;AACX2C,MAAAA,QAAQ,EAAE,KADC;AAEXD,MAAAA,cAAc,EAAE,KAFL;AAGXF,MAAAA,QAAQ,EAAE,EAHC;AAIXF,MAAAA,mBAAmB,EAAE,EAJV;AAKXC,MAAAA,UAAU,EAAE,EALD;AAMXE,MAAAA,gBAAgB,EAAE,EANP;AAOXlB,MAAAA,KAAK,EAAE,EAPI;AAQXF,MAAAA,SAAS,EAAE,CAAC;AAAEI,QAAAA,GAAG,EAAE,CAAP;AAAUE,QAAAA,IAAI,EAAE;AAAhB,OAAD,CARA;AASXkB,MAAAA,aAAa,EAAE,EATJ;AAUXd,MAAAA,OAAO,EAAE,EAVE;AAWXoB,MAAAA,aAAa,EAAE,CAAC,CAXL;AAYXE,MAAAA,WAAW,EAAE,EAZF;AAaXC,MAAAA,WAAW,EAAEC,SAbF;AAcX3D,MAAAA,MAAM,EAAE2D;AAdG,KAAb;AAgBD;;AAED,QAAMC,iBAAN,GAA0B;AACxB,QAAI,KAAK5C,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBqB,QAA5B,EAAsC;AACpC;AACA,WAAKxB,KAAL,CAAWxB,gBAAX,CAA4B,wBAA5B;AACA,WAAKwB,KAAL,CAAWvB,aAAX,CACE,aAAa,KAAKuB,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBqB,QAAxB,CAAiCqB,QAAjC,EADf;AAGA,WAAK7C,KAAL,CAAWtB,gBAAX,CACE,oBAAoB,KAAKsB,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBqB,QAD9C;AAGA,YAAMxC,MAAM,GAAG,MAAMF,cAAc,CAACgE,aAAf,CACnB,KAAK9C,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBqB,QADL,CAArB;AAGA,YAAMuB,SAAS,GAAG,MAAMjE,cAAc,CAACkE,oBAAf,CACtB,KAAKhD,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBqB,QADF,CAAxB;AAGA,YAAMtC,OAAO,GAAG,MAAMD,cAAc,CAACgE,cAAf,CACpBF,SAAS,CAAC,CAAD,CAAT,CAAaR,aADO,CAAtB;AAGA,UAAIN,aAAa,GAAG,EAApB;;AACA,WAAK,IAAIiB,CAAT,IAAcH,SAAd,EAAyB;AACvB,cAAMI,eAAe,GAAG,MAAMlE,cAAc,CAACgE,cAAf,CAC5BF,SAAS,CAACG,CAAD,CAAT,CAAaX,aADe,CAA9B;AAGAN,QAAAA,aAAa,GAAGA,aAAa,CAACmB,MAAd,CAAqB,mBAE9BL,SAAS,CAACG,CAAD,CAFqB;AAGjCT,UAAAA,WAAW,EAAEU,eAAe,CAACE,eAHI;AAIjCC,UAAAA,YAAY,EAAEP,SAAS,CAACG,CAAD,CAAT,CAAaK,qBAJM;AAKjCC,UAAAA,KAAK,EAAET,SAAS,CAACG,CAAD,CAAT,CAAaO,cALa;AAMjCC,UAAAA,MAAM,EAAE;AANyB,WAArB,CAAhB;AASD;;AACD,WAAKzC,QAAL,mBACKjC,MADL;AAEEyB,QAAAA,SAAS,EAAE,CAAC,SAAD,EAAY,SAAZ,CAFb;AAGEwB,QAAAA,aAHF;AAIEd,QAAAA,OAAO,EAAE,EAJX;AAKEsB,QAAAA,WAAW,EAAEvD,OAAO,CAACmE,eALvB;AAMEX,QAAAA,WAAW,EAAE1D,MAAM,CAAC2E,YANtB;AAOEpB,QAAAA,aAAa,EAAErD,OAAO,CAACqD,aAPzB;AAQEvD,QAAAA;AARF;AAUD,KA3CD,MA2CO;AACL,WAAKgB,KAAL,CAAWxB,gBAAX,CAA4B,oBAA5B;AACA,WAAKwB,KAAL,CAAWvB,aAAX,CAAyB,cAAc,KAAKuB,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBC,SAA/D;AACA,WAAKJ,KAAL,CAAWtB,gBAAX,CACE,sBAAsB,KAAKsB,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBC,SADhD;AAGAxB,MAAAA,eAAe,CAACG,QAAhB,CAAyB4B,KAAzB,CACGiD,UADH,GAEG1B,IAFH,CAEQ2B,GAAG,IAAI;AACX,aAAK5C,QAAL,CAAc;AAAER,UAAAA,SAAS,EAAE,KAAKrB,KAAL,CAAWqB,SAAX,CAAqB2C,MAArB,CAA4BS,GAA5B;AAAb,SAAd;AACD,OAJH,EAKGC,KALH,CAKS,MAAM,CAAE,CALjB;AAMA,YAAM5E,OAAO,GAAG,MAAMD,cAAc,CAACgE,cAAf,CACpB,KAAKjD,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBC,SADJ,CAAtB;AAGA,WAAKa,QAAL,CAAc;AACZwB,QAAAA,WAAW,EAAEvD,OAAO,CAACmE,eADT;AAEZd,QAAAA,aAAa,EAAEwB,QAAQ,CAAC,KAAK/D,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,CAAwBC,SAAzB;AAFX,OAAd;AAID;AACF;;AA8CDmB,EAAAA,WAAW,GAAG;AACZ,QACE,CAAC,KAAKnC,KAAL,CAAWsC,mBAAZ,IACA,CAAC,KAAKtC,KAAL,CAAWwC,QADZ,IAEA,CAAC,KAAKxC,KAAL,CAAWuB,KAHd,EAIE;AACA,WAAKM,QAAL,CAAc;AACZE,QAAAA,OAAO,EAAE;AADG,OAAd;AAGA,aAAO,KAAP;AACD;;AACD,QAAI,KAAK/B,KAAL,CAAWuC,UAAX,CAAsBqC,MAAtB,KAAiC,EAArC,EAAyC;AACvC,WAAK/C,QAAL,CAAc;AACZE,QAAAA,OAAO,EACL;AAFU,OAAd;AAIA,aAAO,KAAP;AACD;;AACD,QAAI,KAAK/B,KAAL,CAAW6C,aAAX,CAAyB+B,MAAzB,KAAoC,CAAxC,EAA2C;AACzC,WAAK/C,QAAL,CAAc;AACZE,QAAAA,OAAO,EACL;AAFU,OAAd;AAIA,aAAO,KAAP;AACD;;AACD,WAAO,IAAP;AACD;;AAiDD8C,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK/C,cAAL,CAAoB,KAAK9B,KAAL,CAAW+B,OAA/B,CADH,EAEE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEd,QAAAA,MAAM,EAAE,MAAV;AAAkB6D,QAAAA,SAAS,EAAE;AAA7B,OAAb;AAAoD,MAAA,QAAQ,MAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,UAAD;AAAY,MAAA,KAAK,EAAE,EAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAK5C,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AACE,MAAA,OAAO,EAAEjD,QADX;AAEE,MAAA,KAAK,EAAC,MAFR;AAGE,MAAA,OAAO,EAAE,MACP,KAAK4C,QAAL,CAAc;AAAEc,QAAAA,QAAQ,EAAE,CAAC,KAAK3C,KAAL,CAAW2C;AAAxB,OAAd,CAJJ;AAME,MAAA,OAAO,EAAE,KAAK3C,KAAL,CAAW2C,QANtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EASE,oBAAC,IAAD,CAAM,KAAN;AACE,MAAA,OAAO,EAAE1D,QADX;AAEE,MAAA,KAAK,EAAC,sBAFR;AAGE,MAAA,OAAO,EAAE,MACP,KAAK4C,QAAL,CAAc;AACZa,QAAAA,cAAc,EAAE,CAAC,KAAK1C,KAAL,CAAW0C;AADhB,OAAd,CAJJ;AAQE,MAAA,OAAO,EAAE,KAAK1C,KAAL,CAAW0C,cARtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF,EAqBE,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AACE,MAAA,KAAK,EAAC,mBADR;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,WAAW,EAAC,mBAHd;AAIE,MAAA,QAAQ,MAJV;AAKE,MAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWwC,QALpB;AAME,MAAA,YAAY,EAAC,OANf;AAOE,MAAA,QAAQ,EAAE,CAACuC,KAAD,EAAQ;AAAEvE,QAAAA;AAAF,OAAR,KACR,KAAKqB,QAAL,CAAc;AAAEW,QAAAA,QAAQ,EAAEhC;AAAZ,OAAd,CARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CArBF,EAkCE,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,MAAM,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AACE,MAAA,KAAK,MADP;AAEE,MAAA,QAAQ,MAFV;AAGE,MAAA,KAAK,EAAC,eAHR;AAIE,MAAA,WAAW,EAAC,gBAJd;AAKE,MAAA,QAAQ,EAAEoB,CAAC,IACT,KAAKC,QAAL,CAAc;AAAES,QAAAA,mBAAmB,EAAEV,CAAC,CAACoD,MAAF,CAASxE;AAAhC,OAAd,CANJ;AAQE,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWsC,mBARpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAYE,oBAAC,IAAD,CAAM,KAAN;AACE,MAAA,KAAK,MADP;AAEE,MAAA,QAAQ,MAFV;AAGE,MAAA,KAAK,EAAC,OAHR;AAIE,MAAA,WAAW,EAAC,OAJd;AAKE,MAAA,QAAQ,EAAEV,CAAC,IACT,KAAKC,QAAL,CAAc;AAAEU,QAAAA,UAAU,EAAEX,CAAC,CAACoD,MAAF,CAASxE;AAAvB,OAAd,CANJ;AAQE,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWuC,UARpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,CAlCF,EAyDG,KAAK1B,YAAL,EAzDH,EA0DE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAE,EAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AACE,MAAA,WAAW,EAAC,cADd;AAEE,MAAA,QAAQ,EAAEe,CAAC,IACT,KAAKC,QAAL,CAAc;AAAEY,QAAAA,gBAAgB,EAAEb,CAAC,CAACoD,MAAF,CAASxE;AAA7B,OAAd,CAHJ;AAKE,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWyC,gBALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CA1DF,CADF,EAuEE,oBAAC,iBAAD;AACE,MAAA,OAAO,EAAE;AACPwC,QAAAA,EAAE,EAAE,KAAKjF,KAAL,CAAWmD,aADR;AAEPzB,QAAAA,IAAI,EAAE,KAAK1B,KAAL,CAAWqD;AAFV,OADX;AAKE,MAAA,SAAS,EAAE,KAAKrD,KAAL,CAAW6C,aALxB;AAME,MAAA,cAAc,EAAEA,aAAa,IAC3B,KAAKhB,QAAL,CAAc;AAAEgB,QAAAA;AAAF,OAAd,CAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvEF,EAiFE,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAAEb,QAAAA,SAAS,EAAE;AAAb,OAAf;AAAsC,MAAA,OAAO,EAAE,KAAKE,QAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAjFF,CADF,CADF,CAFF,CADF;AA8FD;;AA7SiD;;AAgTpDzB,qBAAqB,CAACyE,SAAtB,GAAkC;AAChC9F,EAAAA,gBAAgB,EAAED,SAAS,CAACgG,IAAV,CAAeC,UADD;AAEhC/F,EAAAA,aAAa,EAAEF,SAAS,CAACgG,IAAV,CAAeC,UAFE;AAGhC9F,EAAAA,gBAAgB,EAAEH,SAAS,CAACgG,IAAV,CAAeC,UAHD;AAIhCnF,EAAAA,UAAU,EAAEd,SAAS,CAACkG,MAAV,CAAiBD,UAJG;AAKhCnC,EAAAA,OAAO,EAAE9D,SAAS,CAACmG,GALa;AAMhCxE,EAAAA,KAAK,EAAE3B,SAAS,CAACoG,KAAV,CAAgB;AACrBxE,IAAAA,MAAM,EAAE5B,SAAS,CAACoG,KAAV,CAAgB;AACtBvE,MAAAA,SAAS,EAAE7B,SAAS,CAACqG,MADC;AAEtBpD,MAAAA,QAAQ,EAAEjD,SAAS,CAACqG;AAFE,KAAhB;AADa,GAAhB;AANyB,CAAlC;AAcA,eAAejG,OAAO,CACpBQ,eADoB,EAEpBK,kBAFoB,CAAP,CAGbK,qBAHa,CAAf","sourcesContent":["/* eslint-disable no-undef */\nimport React from 'react';\nimport {\n  Form,\n  Grid,\n  GridRow,\n  GridColumn,\n  TextArea,\n  Button,\n  Message,\n  Container,\n  Checkbox\n} from 'semantic-ui-react';\nimport { DateInput } from 'semantic-ui-calendar-react';\nimport { PropTypes } from 'prop-types';\nimport {\n  changeNameOfPage,\n  changeBackUrl,\n  changeActivePage\n} from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport PouchDbServices from '../../services';\nimport ControleComponent from './controles.container';\nlet visitesService = PouchDbServices.services.visite;\nlet dossierService = PouchDbServices.services.dossier;\n\nfunction mapStateToProps(state) {\n  return {\n    agentIdent: state.dataReducer.AGENT_DD_IDENT\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: newName => dispatch(changeNameOfPage(newName)),\n    changeBackUrl: newBackUrl => dispatch(changeBackUrl(newBackUrl)),\n    changeActivePage: value => dispatch(changeActivePage('mesDossiers', value))\n  };\n}\n\nclass CreateVisiteComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      VIS_CPMM: false,\n      VIS_MUTUALISEE: false,\n      VIS_DATE: '',\n      ETOB_RAISON_SOCIALE: '',\n      ETOB_SIRET: '',\n      VIS_OBSERVATIONS: '',\n      trame: '',\n      trameList: [{ _id: 0, name: 'Aucune trame' }],\n      controlesList: [],\n      message: '',\n      DOSSIER_IDENT: -1,\n      dossierText: '',\n      visiteIdent: undefined,\n      visite: undefined\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.match.params.visiteId) {\n      //Si on est sur la page de modification de visite\n      this.props.changeNameOfPage('Modification de visite');\n      this.props.changeBackUrl(\n        '/visite/' + this.props.match.params.visiteId.toString()\n      );\n      this.props.changeActivePage(\n        '/modify-visite/' + this.props.match.params.visiteId\n      );\n      const visite = await visitesService.getVisiteById(\n        this.props.match.params.visiteId\n      );\n      const controles = await visitesService.getControlesByVisite(\n        this.props.match.params.visiteId\n      );\n      const dossier = await dossierService.getDossierById(\n        controles[0].DOSSIER_IDENT\n      );\n      let controlesList = [];\n      for (let i in controles) {\n        const dossierControle = await dossierService.getDossierById(\n          controles[i].DOSSIER_IDENT\n        );\n        controlesList = controlesList.concat([\n          {\n            ...controles[i],\n            dossierText: dossierControle.DOSSIER_LIBELLE,\n            activiteText: controles[i].ACDG_CODE_LIB_NIVEAU3,\n            ident: controles[i].CONTROLE_IDENT,\n            exists: true\n          }\n        ]);\n      }\n      this.setState({\n        ...visite,\n        trameList: ['trame 1', 'trame 2'],\n        controlesList,\n        message: '',\n        dossierText: dossier.DOSSIER_LIBELLE,\n        visiteIdent: visite.VISITE_IDENT,\n        DOSSIER_IDENT: dossier.DOSSIER_IDENT,\n        visite\n      });\n    } else {\n      this.props.changeNameOfPage('Création de visite');\n      this.props.changeBackUrl('/dossier/' + this.props.match.params.dossierId);\n      this.props.changeActivePage(\n        '/nouvelle-visite/' + this.props.match.params.dossierId\n      );\n      PouchDbServices.services.trame\n        .getAllDocs()\n        .then(res => {\n          this.setState({ trameList: this.state.trameList.concat(res) });\n        })\n        .catch(() => {});\n      const dossier = await dossierService.getDossierById(\n        this.props.match.params.dossierId\n      );\n      this.setState({\n        dossierText: dossier.DOSSIER_LIBELLE,\n        DOSSIER_IDENT: parseInt(this.props.match.params.dossierId)\n      });\n    }\n  }\n\n  displayTrame = () => {\n    if (this.props.match.params.dossierId) {\n      return (\n        <Form.Group style={{ margin: 0 }}>\n          <Grid style={{ width: '100%', margin: 0 }} verticalAlign=\"bottom\">\n            <GridRow style={{ display: 'flex' }}>\n              <Grid.Column width={16} style={{ padding: 0 }}>\n                <Form.Select\n                  fluid\n                  placeholder=\"Trame\"\n                  label=\"Trame associée\"\n                  style={{ width: '100%' }}\n                  options={this.state.trameList.map(trame => ({\n                    key: trame._id,\n                    text: trame.name,\n                    value: trame\n                  }))}\n                  onChange={(e, { value }) => this.setState({ trame: value })}\n                />\n              </Grid.Column>\n            </GridRow>\n          </Grid>\n        </Form.Group>\n      );\n    }\n  };\n  displayMessage = message => {\n    if (message) {\n      return (\n        <Message\n          fluid\n          negative\n          onDismiss={() => this.setState({ message: '' })}\n          style={{ marginTop: '10px' }}\n        >\n          <Message.Header style={{ marginBottom: '5px' }}>\n            Validation Impossible\n          </Message.Header>\n          <Message.Content>{message}</Message.Content>\n        </Message>\n      );\n    }\n  };\n\n  testEntries() {\n    if (\n      !this.state.ETOB_RAISON_SOCIALE ||\n      !this.state.VIS_DATE ||\n      !this.state.trame\n    ) {\n      this.setState({\n        message: \"Veillez renseigner l'ensemble des champs obligatoires\"\n      });\n      return false;\n    }\n    if (this.state.ETOB_SIRET.length !== 14) {\n      this.setState({\n        message:\n          \"Le numéro SIRET renseigné n'est pas valide : il doit être composé de 14 chiffres\"\n      });\n      return false;\n    }\n    if (this.state.controlesList.length === 0) {\n      this.setState({\n        message:\n          'Veuillez rentrer au moins un contrôle. Vous pourrez le modifier par la suite si besoin'\n      });\n      return false;\n    }\n    return true;\n  }\n\n  onSubmit = () => {\n    if (this.testEntries()) {\n      if (this.props.match.params.visiteId) {\n        visitesService\n          .updateVisite(\n            {\n              ...this.state.visite,\n              ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n              ETOB_SIRET: this.state.ETOB_SIRET,\n              VIS_DATE: this.state.VIS_DATE,\n              VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n              VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n              VIS_CPMM: this.state.VIS_CPMM,\n              trame: this.state.trame,\n              AG_IDENT: this.props.agentIdent\n            },\n            this.state.controlesList\n          )\n          .then(() => {\n            window.alert('La visite a bien été modifiée.');\n            this.props.history.push('/dossier/' + this.state.DOSSIER_IDENT);\n          });\n      } else {\n        visitesService\n          .postControlesByVisite(\n            {\n              ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n              ETOB_SIRET: this.state.ETOB_SIRET,\n              VIS_DATE: this.state.VIS_DATE,\n              VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n              VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n              VIS_CPMM: this.state.VIS_CPMM,\n              trame: this.state.trame,\n              AG_IDENT: this.props.agentIdent\n            },\n            this.state.controlesList\n          )\n          .then(() => {\n            window.alert('La visite a bien été ajoutée.');\n            this.props.history.push(\n              '/dossier/' + this.props.match.params.dossierId\n            );\n          });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <Container>\n        {this.displayMessage(this.state.message)}\n        <Grid style={{ margin: 'auto', textAlign: 'left' }} centered>\n          <GridRow>\n            <GridColumn width={14}>\n              <Form onSubmit={this.onSubmit}>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    control={Checkbox}\n                    label=\"CPMM\"\n                    onClick={() =>\n                      this.setState({ VIS_CPMM: !this.state.VIS_CPMM })\n                    }\n                    checked={this.state.VIS_CPMM}\n                  />\n                  <Form.Field\n                    control={Checkbox}\n                    label=\"Visite Mutualisée\"\n                    onClick={() =>\n                      this.setState({\n                        VIS_MUTUALISEE: !this.state.VIS_MUTUALISEE\n                      })\n                    }\n                    checked={this.state.VIS_MUTUALISEE}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <DateInput\n                    label=\"Date de la visite\"\n                    name=\"date\"\n                    placeholder=\"Date de la visite\"\n                    required\n                    value={this.state.VIS_DATE}\n                    iconPosition=\"right\"\n                    onChange={(event, { value }) =>\n                      this.setState({ VIS_DATE: value })\n                    }\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Input\n                    fluid\n                    required\n                    label=\"Etablissement\"\n                    placeholder=\"Raison Sociale\"\n                    onChange={e =>\n                      this.setState({ ETOB_RAISON_SOCIALE: e.target.value })\n                    }\n                    value={this.state.ETOB_RAISON_SOCIALE}\n                  />\n\n                  <Form.Input\n                    fluid\n                    required\n                    label=\"SIRET\"\n                    placeholder=\"SIRET\"\n                    onChange={e =>\n                      this.setState({ ETOB_SIRET: e.target.value })\n                    }\n                    value={this.state.ETOB_SIRET}\n                  />\n                </Form.Group>\n                {this.displayTrame()}\n                <Form.Group>\n                  <Form.Field width={16}>\n                    <TextArea\n                      placeholder=\"Observations\"\n                      onChange={e =>\n                        this.setState({ VIS_OBSERVATIONS: e.target.value })\n                      }\n                      value={this.state.VIS_OBSERVATIONS}\n                    />\n                  </Form.Field>\n                </Form.Group>\n              </Form>\n              <ControleComponent\n                dossier={{\n                  id: this.state.DOSSIER_IDENT,\n                  text: this.state.dossierText\n                }}\n                controles={this.state.controlesList}\n                changeControle={controlesList =>\n                  this.setState({ controlesList })\n                }\n              />\n              <Button style={{ marginTop: '20px' }} onClick={this.onSubmit}>\n                Valider\n              </Button>\n            </GridColumn>\n          </GridRow>\n        </Grid>\n      </Container>\n    );\n  }\n}\n\nCreateVisiteComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired,\n  agentIdent: PropTypes.number.isRequired,\n  history: PropTypes.any,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      dossierId: PropTypes.string,\n      visiteId: PropTypes.string\n    })\n  })\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CreateVisiteComponent);\n"]},"metadata":{},"sourceType":"module"}