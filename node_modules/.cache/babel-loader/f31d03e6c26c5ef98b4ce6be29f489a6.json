{"ast":null,"code":"var _jsxFileName = \"/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/mes-dossiers/dossiers.container.js\";\nimport React from 'react';\nimport { List, Card, Search } from 'semantic-ui-react';\nimport Dossier from './dossier';\nimport dossierService from '../../services/dossier.service';\nimport { PropTypes } from 'prop-types';\nimport { changeNameOfPage, changeBackUrl, changeActivePage } from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport './dossier.css';\nimport _ from 'lodash';\n\nfunction mapStateToProps() {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: () => dispatch(changeNameOfPage('Mes Dossiers')),\n    changeBackUrl: () => dispatch(changeBackUrl('/menu')),\n    changeActivePage: () => dispatch(changeActivePage('mesDossiers', '/mes-dossiers'))\n  };\n}\n\nclass DossierComponent extends React.Component {\n  loadDossiers(dossiers) {\n    this.setState({\n      dossiers: dossiers,\n      results: dossiers\n    });\n  }\n\n  componentDidMount() {\n    dossierService.getAllDocs().then(res => this.loadDossiers(res));\n    dossierService.onChanges(() => dossierService.getAllDocs().then(res => this.loadDossiers(res)));\n    this.props.changeNameOfPage();\n    this.props.changeBackUrl();\n    this.props.changeActivePage();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleSearchChange = (e, {\n      value\n    }) => {\n      const results = this.state.dossiers.filter(dossier => {\n        return dossier.DOSSIER_LIBELLE && (dossier.DOSSIER_LIBELLE.toLowerCase().includes(value.toLowerCase()) || dossier.DOSSIER_OBJ_TRAVAIL.includes(value.toLowerCase()) || dossier.DOSSIER_IDENT.toString().toLowerCase().includes(value.toString().toLowerCase()));\n      });\n      this.setState({\n        results: results\n      });\n    };\n\n    this.state = {\n      dossiers: [],\n      results: []\n    };\n  }\n\n  render() {\n    return React.createElement(Card, {\n      fluid: true,\n      style: {\n        flexGrow: 1,\n        width: '100%',\n        margin: 0,\n        backgroundColor: '#f2f2f2',\n        borderRadius: 5,\n        boxShadow: '0px 0px 0px 0px #f2f2f2',\n        display: 'flex',\n        alignItems: 'center',\n        flexDirection: 'column',\n        height: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        position: 'fixed',\n        zIndex: 10,\n        width: '100%',\n        textAlign: 'center',\n        backgroundColor: '#f2f2f2',\n        padding: 10,\n        display: 'flex',\n        justifyContent: 'center',\n        verticalAlign: 'middle'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.state.dossiers.length, \" dossiers trouv\\xE9s.\"), React.createElement(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Search, {\n      size: \"tiny\",\n      open: false,\n      onSearchChange: _.debounce(this.handleSearchChange, 500),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.results.length, \" r\\xE9sultats.\")), React.createElement(\"div\", {\n      className: \"responsivemargin\",\n      style: {\n        backgroundColor: '#f2f2f2'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, this.state.results.map(task => React.createElement(List.Item, {\n      key: task.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"responsivepadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Dossier, {\n      icon: \"folder\",\n      iconcolor: \"yellow\",\n      key: task.id,\n      dossier: task,\n      link: 'dossier/' + task.DOSSIER_IDENT,\n      color: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nDossierComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(DossierComponent);","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/mes-dossiers/dossiers.container.js"],"names":["React","List","Card","Search","Dossier","dossierService","PropTypes","changeNameOfPage","changeBackUrl","changeActivePage","connect","_","mapStateToProps","mapDispatchToProps","dispatch","DossierComponent","Component","loadDossiers","dossiers","setState","results","componentDidMount","getAllDocs","then","res","onChanges","props","constructor","handleSearchChange","e","value","state","filter","dossier","DOSSIER_LIBELLE","toLowerCase","includes","DOSSIER_OBJ_TRAVAIL","DOSSIER_IDENT","toString","render","flexGrow","width","margin","backgroundColor","borderRadius","boxShadow","display","alignItems","flexDirection","height","position","zIndex","textAlign","padding","justifyContent","verticalAlign","flex","fontWeight","length","debounce","map","task","id","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { List, Card, Search } from 'semantic-ui-react';\nimport Dossier from './dossier';\nimport dossierService from '../../services/dossier.service';\nimport { PropTypes } from 'prop-types';\nimport {\n  changeNameOfPage,\n  changeBackUrl,\n  changeActivePage\n} from '../navbar/actions';\nimport { connect } from 'react-redux';\n\nimport './dossier.css';\n\nimport _ from 'lodash';\n\nfunction mapStateToProps() {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: () => dispatch(changeNameOfPage('Mes Dossiers')),\n    changeBackUrl: () => dispatch(changeBackUrl('/menu')),\n    changeActivePage: () =>\n      dispatch(changeActivePage('mesDossiers', '/mes-dossiers'))\n  };\n}\n\nclass DossierComponent extends React.Component {\n  loadDossiers(dossiers) {\n    this.setState({ dossiers: dossiers, results: dossiers });\n  }\n\n  handleSearchChange = (e, { value }) => {\n    const results = this.state.dossiers.filter(dossier => {\n      return (\n        dossier.DOSSIER_LIBELLE &&\n        (dossier.DOSSIER_LIBELLE.toLowerCase().includes(value.toLowerCase()) ||\n          dossier.DOSSIER_OBJ_TRAVAIL.includes(value.toLowerCase()) ||\n          dossier.DOSSIER_IDENT.toString()\n            .toLowerCase()\n            .includes(value.toString().toLowerCase()))\n      );\n    });\n\n    this.setState({ results: results });\n  };\n\n  componentDidMount() {\n    dossierService.getAllDocs().then(res => this.loadDossiers(res));\n    dossierService.onChanges(() =>\n      dossierService.getAllDocs().then(res => this.loadDossiers(res))\n    );\n    this.props.changeNameOfPage();\n    this.props.changeBackUrl();\n    this.props.changeActivePage();\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dossiers: [],\n      results: []\n    };\n  }\n\n  render() {\n    return (\n      <Card\n        fluid\n        style={{\n          flexGrow: 1,\n          width: '100%',\n          margin: 0,\n          backgroundColor: '#f2f2f2',\n          borderRadius: 5,\n          boxShadow: '0px 0px 0px 0px #f2f2f2',\n          display: 'flex',\n          alignItems: 'center',\n          flexDirection: 'column',\n          height: '100%'\n        }}\n      >\n        <div\n          style={{\n            position: 'fixed',\n            zIndex: 10,\n            width: '100%',\n            textAlign: 'center',\n            backgroundColor: '#f2f2f2',\n            padding: 10,\n\n            display: 'flex',\n            justifyContent: 'center',\n            verticalAlign: 'middle'\n          }}\n        >\n          <div\n            style={{\n              flex: 1,\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n\n              fontWeight: 'bold'\n            }}\n          >\n            {this.state.dossiers.length} dossiers trouvés.\n          </div>\n          <div style={{ flex: 1, display: 'flex', justifyContent: 'center' }}>\n            <Search\n              size=\"tiny\"\n              open={false}\n              onSearchChange={_.debounce(this.handleSearchChange, 500)}\n            />\n          </div>\n\n          <div\n            style={{\n              flex: 1,\n              display: 'flex',\n              justifyContent: 'center',\n\n              alignItems: 'center'\n            }}\n          >\n            {this.state.results.length} résultats.\n          </div>\n        </div>\n\n        <div\n          className=\"responsivemargin\"\n          style={{\n            backgroundColor: '#f2f2f2'\n          }}\n        >\n          <List>\n            {this.state.results.map(task => (\n              <List.Item key={task.id}>\n                <div className=\"responsivepadding\">\n                  <Dossier\n                    icon=\"folder\"\n                    iconcolor=\"yellow\"\n                    key={task.id}\n                    dossier={task}\n                    link={'dossier/' + task.DOSSIER_IDENT}\n                    color=\"white\"\n                  />\n                </div>\n              </List.Item>\n            ))}\n          </List>\n        </div>\n      </Card>\n    );\n  }\n}\n\nDossierComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(DossierComponent);\n"]},"metadata":{},"sourceType":"module"}