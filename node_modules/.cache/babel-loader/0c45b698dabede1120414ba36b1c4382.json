{"ast":null,"code":"import { store } from '../store';\nimport DossierService from './subservices/dossier.service';\nimport VisiteService from './subservices/visite.service';\nimport ActiviteService from './subservices/activite.service';\nimport CpfService from './subservices/cpf.service';\nimport DocumentsService from './subservices/documents.service';\nimport TrameService from './trame.service';\n\nclass PouchDbServices {\n  constructor() {\n    this.AGENT_DD_IDENT = window.localStorage.getItem('AGENT_DD_IDENT');\n    this.services = {\n      dossier: new DossierService(this.AGENT_DD_IDENT),\n      visite: new VisiteService(this.AGENT_DD_IDENT),\n      activite: new ActiviteService(),\n      trame: new TrameService(),\n      cpf: new CpfService(),\n      documents: new DossierService(this.AGENT_DD_IDENT)\n    };\n    this.ChangeAgent = this.ChangeAgent.bind(this);\n  }\n\n  async ChangeAgent(AGENT_DD_IDENT) {\n    this.AGENT_DD_IDENT = AGENT_DD_IDENT;\n    window.localStorage.setItem('AGENT_DD_IDENT', AGENT_DD_IDENT);\n    await Promise.all(Object.keys(this.services).map(async key => {\n      await this.services[key].resetDb(AGENT_DD_IDENT);\n    }));\n  }\n\n}\n\nexport default new PouchDbServices();","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/services/index.js"],"names":["store","DossierService","VisiteService","ActiviteService","CpfService","DocumentsService","TrameService","PouchDbServices","constructor","AGENT_DD_IDENT","window","localStorage","getItem","services","dossier","visite","activite","trame","cpf","documents","ChangeAgent","bind","setItem","Promise","all","Object","keys","map","key","resetDb"],"mappings":"AAAA,SAASA,KAAT,QAAsB,UAAtB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AAEA,OAAOC,YAAP,MAAyB,iBAAzB;;AAEA,MAAMC,eAAN,CAAsB;AACpBC,EAAAA,WAAW,GAAG;AACZ,SAAKC,cAAL,GAAsBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAAtB;AACA,SAAKC,QAAL,GAAgB;AACdC,MAAAA,OAAO,EAAE,IAAIb,cAAJ,CAAmB,KAAKQ,cAAxB,CADK;AAEdM,MAAAA,MAAM,EAAE,IAAIb,aAAJ,CAAkB,KAAKO,cAAvB,CAFM;AAGdO,MAAAA,QAAQ,EAAE,IAAIb,eAAJ,EAHI;AAIdc,MAAAA,KAAK,EAAE,IAAIX,YAAJ,EAJO;AAKdY,MAAAA,GAAG,EAAE,IAAId,UAAJ,EALS;AAMde,MAAAA,SAAS,EAAE,IAAIlB,cAAJ,CAAmB,KAAKQ,cAAxB;AANG,KAAhB;AAQA,SAAKW,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AAED,QAAMD,WAAN,CAAkBX,cAAlB,EAAkC;AAChC,SAAKA,cAAL,GAAsBA,cAAtB;AACAC,IAAAA,MAAM,CAACC,YAAP,CAAoBW,OAApB,CAA4B,gBAA5B,EAA8Cb,cAA9C;AACA,UAAMc,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACC,IAAP,CAAY,KAAKb,QAAjB,EAA2Bc,GAA3B,CAA+B,MAAMC,GAAN,IAAa;AAC5D,YAAM,KAAKf,QAAL,CAAce,GAAd,EAAmBC,OAAnB,CAA2BpB,cAA3B,CAAN;AACD,KAFiB,CAAZ,CAAN;AAGD;;AApBmB;;AAuBtB,eAAe,IAAIF,eAAJ,EAAf","sourcesContent":["import { store } from '../store';\nimport DossierService from './subservices/dossier.service';\nimport VisiteService from './subservices/visite.service';\nimport ActiviteService from './subservices/activite.service';\nimport CpfService from './subservices/cpf.service';\nimport DocumentsService from './subservices/documents.service';\n\nimport TrameService from './trame.service';\n\nclass PouchDbServices {\n  constructor() {\n    this.AGENT_DD_IDENT = window.localStorage.getItem('AGENT_DD_IDENT');\n    this.services = {\n      dossier: new DossierService(this.AGENT_DD_IDENT),\n      visite: new VisiteService(this.AGENT_DD_IDENT),\n      activite: new ActiviteService(),\n      trame: new TrameService(),\n      cpf: new CpfService(),\n      documents: new DossierService(this.AGENT_DD_IDENT)\n    };\n    this.ChangeAgent = this.ChangeAgent.bind(this);\n  }\n\n  async ChangeAgent(AGENT_DD_IDENT) {\n    this.AGENT_DD_IDENT = AGENT_DD_IDENT;\n    window.localStorage.setItem('AGENT_DD_IDENT', AGENT_DD_IDENT);\n    await Promise.all(Object.keys(this.services).map(async key => {\n      await this.services[key].resetDb(AGENT_DD_IDENT);\n    }));\n  }\n}\n\nexport default new PouchDbServices();\n"]},"metadata":{},"sourceType":"module"}