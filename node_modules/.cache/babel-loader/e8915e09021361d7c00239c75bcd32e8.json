{"ast":null,"code":"import { store } from '../store';\nimport DossierService from './dossier.service';\nimport VisiteService from './visite.service';\n\nclass PouchDbServices {\n  constructor() {\n    this.AGENT_DD_IDENT = store.getState().dataReducer.AGENT_DD_IDENT;\n    this.services = {\n      dossier: new DossierService(this.AGENT_DD_IDENT),\n      visite: new VisiteService(this.AGENT_DD_IDENT)\n    };\n    this.onAgentChange = this.onAgentChange.bind(this);\n  }\n\n  async onAgentChange(AGENT_DD_IDENT) {\n    this.AGENT_DD_IDENT = AGENT_DD_IDENT;\n    await Promise.all(Object.keys(this.services).map(async key => await this.services[key].destroy()));\n    this.services = {\n      dossier: new DossierService(this.AGENT_DD_IDENT),\n      visite: new VisiteService(this.AGENT_DD_IDENT)\n    };\n  }\n\n}\n\nexport default new PouchDbServices();","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/services/index.js"],"names":["store","DossierService","VisiteService","PouchDbServices","constructor","AGENT_DD_IDENT","getState","dataReducer","services","dossier","visite","onAgentChange","bind","Promise","all","Object","keys","map","key","destroy"],"mappings":"AAAA,SAASA,KAAT,QAAsB,UAAtB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAOC,aAAP,MAA0B,kBAA1B;;AAEA,MAAMC,eAAN,CAAsB;AAElBC,EAAAA,WAAW,GAAG;AACV,SAAKC,cAAL,GAAsBL,KAAK,CAACM,QAAN,GAAiBC,WAAjB,CAA6BF,cAAnD;AACA,SAAKG,QAAL,GAAgB;AACZC,MAAAA,OAAO,EAAE,IAAIR,cAAJ,CAAmB,KAAKI,cAAxB,CADG;AAEZK,MAAAA,MAAM,EAAE,IAAIR,aAAJ,CAAkB,KAAKG,cAAvB;AAFI,KAAhB;AAIA,SAAKM,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAED,QAAMD,aAAN,CAAoBN,cAApB,EAAoC;AAChC,SAAKA,cAAL,GAAsBA,cAAtB;AACA,UAAMQ,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACC,IAAP,CAAY,KAAKR,QAAjB,EAA2BS,GAA3B,CAA+B,MAAMC,GAAN,IAAa,MAAM,KAAKV,QAAL,CAAcU,GAAd,EAAmBC,OAAnB,EAAlD,CAAZ,CAAN;AACA,SAAKX,QAAL,GAAgB;AACZC,MAAAA,OAAO,EAAE,IAAIR,cAAJ,CAAmB,KAAKI,cAAxB,CADG;AAEZK,MAAAA,MAAM,EAAE,IAAIR,aAAJ,CAAkB,KAAKG,cAAvB;AAFI,KAAhB;AAIH;;AAlBiB;;AAqBtB,eAAe,IAAIF,eAAJ,EAAf","sourcesContent":["import { store } from '../store';\nimport DossierService from './dossier.service';\nimport VisiteService from './visite.service';\n\nclass PouchDbServices {\n\n    constructor() {\n        this.AGENT_DD_IDENT = store.getState().dataReducer.AGENT_DD_IDENT;\n        this.services = {\n            dossier: new DossierService(this.AGENT_DD_IDENT),\n            visite: new VisiteService(this.AGENT_DD_IDENT),\n        }\n        this.onAgentChange = this.onAgentChange.bind(this);\n    }\n\n    async onAgentChange(AGENT_DD_IDENT) {\n        this.AGENT_DD_IDENT = AGENT_DD_IDENT;\n        await Promise.all(Object.keys(this.services).map(async key => await this.services[key].destroy()));\n        this.services = {\n            dossier: new DossierService(this.AGENT_DD_IDENT),\n            visite: new VisiteService(this.AGENT_DD_IDENT),\n        }\n    }\n}\n\nexport default new PouchDbServices();"]},"metadata":{},"sourceType":"module"}