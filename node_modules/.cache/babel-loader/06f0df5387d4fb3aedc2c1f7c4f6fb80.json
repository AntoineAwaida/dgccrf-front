{"ast":null,"code":"import _objectSpread from \"/Users/antoine/Documents/DGCCRF/dgccrf-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/visiteCreation/createVisite.container.js\";\n\n/* eslint-disable no-undef */\nimport React from 'react';\nimport { Form, Grid, GridRow, GridColumn, TextArea, Button, Message, Container, Checkbox } from 'semantic-ui-react';\nimport { DateInput } from 'semantic-ui-calendar-react';\nimport { PropTypes } from 'prop-types';\nimport { changeNameOfPage, changeBackUrl, changeActivePage } from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport PouchDbServices from '../../services';\nimport ControleComponent from './controles.container';\nimport EntrepriseField from '../../components/fields/entrepriseField.component';\nlet visitesService = PouchDbServices.services.visite;\nlet dossierService = PouchDbServices.services.dossier;\n\nconst moment = require('moment');\n\nfunction mapStateToProps(state) {\n  return {\n    agentIdent: state.dataReducer.AGENT_DD_IDENT\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: newName => dispatch(changeNameOfPage(newName)),\n    changeBackUrl: newBackUrl => dispatch(changeBackUrl(newBackUrl)),\n    changeActivePage: value => dispatch(changeActivePage('mesDossiers', value))\n  };\n}\n\nclass CreateVisiteComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.displayTrame = () => {\n      if (this.props.match.params.dossierId) {\n        return React.createElement(Form.Group, {\n          style: {\n            margin: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          style: {\n            width: '100%',\n            margin: 0\n          },\n          verticalAlign: \"bottom\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(GridRow, {\n          style: {\n            display: 'flex'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(Grid.Column, {\n          width: 16,\n          style: {\n            padding: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, React.createElement(Form.Select, {\n          fluid: true,\n          placeholder: \"Trame\",\n          label: \"Trame associ\\xE9e\",\n          style: {\n            width: '100%'\n          },\n          options: this.state.trameList.map(trame => ({\n            key: trame._id,\n            text: trame.name,\n            value: trame\n          })),\n          onChange: (e, {\n            value\n          }) => this.setState({\n            trame: value\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        })))));\n      }\n    };\n\n    this.displayMessage = message => {\n      if (message) {\n        return React.createElement(Message, {\n          fluid: true,\n          negative: true,\n          onDismiss: () => this.setState({\n            message: ''\n          }),\n          style: {\n            marginTop: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(Message.Header, {\n          style: {\n            marginBottom: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, \"Validation Impossible\"), React.createElement(Message.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, message));\n      }\n    };\n\n    this.onSubmit = () => {\n      if (this.testEntries()) {\n        if (this.props.match.params.visiteId) {\n          visitesService.updateVisite(_objectSpread({}, this.state.visite, {\n            ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n            ETOB_SIRET: this.state.ETOB_SIRET,\n            VIS_DATE: this.state.VIS_DATE,\n            VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n            VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n            VIS_CPMM: this.state.VIS_CPMM,\n            trame: this.state.trame,\n            AG_IDENT: this.props.agentIdent\n          }), this.state.controlesList).then(() => {\n            window.alert('La visite a bien été modifiée.');\n            this.props.history.push('/dossier/' + this.state.DOSSIER_IDENT);\n          });\n        } else {\n          visitesService.postControlesByVisite({\n            ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n            ETOB_SIRET: this.state.ETOB_SIRET,\n            VIS_DATE: this.state.VIS_DATE,\n            VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n            VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n            VIS_CPMM: this.state.VIS_CPMM,\n            trame: this.state.trame,\n            AG_IDENT: this.props.agentIdent\n          }, this.state.controlesList).then(() => {\n            window.alert('La visite a bien été ajoutée.');\n            this.props.history.push('/dossier/' + this.props.match.params.dossierId);\n          });\n        }\n      }\n    };\n\n    this.state = {\n      VIS_CPMM: false,\n      VIS_MUTUALISEE: false,\n      VIS_DATE: moment().format('DD-MM-YYYY'),\n      ETOB_RAISON_SOCIALE: '',\n      ETOB_SIRET: '',\n      VIS_OBSERVATIONS: '',\n      trame: '',\n      trameList: [{\n        _id: 0,\n        name: 'Aucune trame'\n      }],\n      controlesList: [],\n      message: '',\n      //Message d'erreur si il y en a\n      DOSSIER_IDENT: -1,\n      dossierText: '',\n      visiteIdent: undefined,\n      //Identifiant de la visite dans le cas de modification\n      visite: undefined //Visite dans le cas de modification\n\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.match.params.visiteId) {\n      //Si on est sur une page de modification de visite\n      this.props.changeNameOfPage('Modification de visite');\n      this.props.changeBackUrl('/visite/' + this.props.match.params.visiteId.toString());\n      this.props.changeActivePage('/modify-visite/' + this.props.match.params.visiteId); // On charge la visite et les controles correspondant\n\n      const visite = await visitesService.getVisiteById(this.props.match.params.visiteId);\n      const controles = await visitesService.getControlesByVisite(this.props.match.params.visiteId);\n      const dossier = await dossierService.getDossierById(controles[0].DOSSIER_IDENT); //Dossier correspondant au premier contrôle (pour régler le dossier par défaut dans la création de controle)\n\n      let controlesList = [];\n\n      for (let i in controles) {\n        // On recrée la liste des controles de la visite\n        const dossierControle = await dossierService.getDossierById(controles[i].DOSSIER_IDENT); //Dossier correspondant à la visite\n\n        controlesList = controlesList.concat([_objectSpread({}, controles[i], {\n          dossierText: dossierControle.DOSSIER_LIBELLE,\n          activiteText: controles[i].ACDG_CODE_LIB_NIVEAU3,\n          ident: controles[i].CONTROLE_IDENT,\n          exists: true //indique que le contrôle existe déjà dans la base de données\n\n        })]);\n      }\n\n      this.setState(_objectSpread({}, visite, {\n        controlesList,\n        message: '',\n        dossierText: dossier.DOSSIER_LIBELLE,\n        visiteIdent: visite.VISITE_IDENT,\n        DOSSIER_IDENT: dossier.DOSSIER_IDENT,\n        visite\n      }));\n    } else {\n      //Si on est en création de visite\n      this.props.changeNameOfPage('Création de visite');\n      this.props.changeBackUrl('/dossier/' + this.props.match.params.dossierId);\n      this.props.changeActivePage('/nouvelle-visite/' + this.props.match.params.dossierId);\n      PouchDbServices.services.trame.getAllDocs().then(res => {\n        this.setState({\n          trameList: this.state.trameList.concat(res)\n        });\n      }).catch(() => {});\n      const dossier = await dossierService.getDossierById(this.props.match.params.dossierId);\n      this.setState({\n        dossierText: dossier.DOSSIER_LIBELLE,\n        DOSSIER_IDENT: parseInt(this.props.match.params.dossierId)\n      });\n    }\n  }\n\n  testEntries() {\n    if (!this.state.ETOB_RAISON_SOCIALE || !this.state.VIS_DATE || !this.state.trame) {\n      this.setState({\n        message: \"Veillez renseigner l'ensemble des champs obligatoires\"\n      });\n      return false;\n    }\n\n    if (this.state.ETOB_SIRET.length !== 14) {\n      this.setState({\n        message: \"Le numéro SIRET renseigné n'est pas valide : il doit être composé de 14 chiffres\"\n      });\n      return false;\n    }\n\n    if (this.state.controlesList.length === 0) {\n      this.setState({\n        message: 'Veuillez rentrer au moins un contrôle. Vous pourrez le modifier par la suite si besoin'\n      });\n      return false;\n    }\n\n    return true;\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, this.displayMessage(this.state.message), React.createElement(Grid, {\n      style: {\n        margin: 'auto',\n        textAlign: 'left'\n      },\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(GridRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(GridColumn, {\n      width: 14,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      control: Checkbox,\n      label: \"CPMM\",\n      onClick: () => this.setState({\n        VIS_CPMM: !this.state.VIS_CPMM\n      }),\n      checked: this.state.VIS_CPMM,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      control: Checkbox,\n      label: \"Visite Mutualis\\xE9e\",\n      onClick: () => this.setState({\n        VIS_MUTUALISEE: !this.state.VIS_MUTUALISEE\n      }),\n      checked: this.state.VIS_MUTUALISEE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(DateInput, {\n      label: \"Date de la visite\",\n      name: \"date\",\n      placeholder: \"Date de la visite\",\n      required: true,\n      value: this.state.VIS_DATE,\n      iconPosition: \"right\",\n      onChange: (event, {\n        value\n      }) => this.setState({\n        VIS_DATE: value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    })), React.createElement(EntrepriseField, {\n      ETOB_SIRET: this.state.ETOB_SIRET,\n      ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n      changeSiretValue: ETOB_SIRET => this.setState({\n        ETOB_SIRET\n      }),\n      changeRaisonSocialeValue: ETOB_RAISON_SOCIALE => this.setState({\n        ETOB_RAISON_SOCIALE\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }), this.displayTrame(), React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      width: 16,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(TextArea, {\n      placeholder: \"Observations\",\n      onChange: e => this.setState({\n        VIS_OBSERVATIONS: e.target.value\n      }),\n      value: this.state.VIS_OBSERVATIONS,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    })))), React.createElement(ControleComponent, {\n      dossier: {\n        id: this.state.DOSSIER_IDENT,\n        text: this.state.dossierText\n      },\n      controles: this.state.controlesList,\n      changeControle: controlesList => this.setState({\n        controlesList\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }), React.createElement(Button, {\n      style: {\n        marginTop: '20px'\n      },\n      onClick: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, \"Valider\")))));\n  }\n\n}\n\nCreateVisiteComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired,\n  agentIdent: PropTypes.number.isRequired,\n  history: PropTypes.any,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      dossierId: PropTypes.string,\n      visiteId: PropTypes.string\n    })\n  })\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateVisiteComponent);","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/visiteCreation/createVisite.container.js"],"names":["React","Form","Grid","GridRow","GridColumn","TextArea","Button","Message","Container","Checkbox","DateInput","PropTypes","changeNameOfPage","changeBackUrl","changeActivePage","connect","PouchDbServices","ControleComponent","EntrepriseField","visitesService","services","visite","dossierService","dossier","moment","require","mapStateToProps","state","agentIdent","dataReducer","AGENT_DD_IDENT","mapDispatchToProps","dispatch","newName","newBackUrl","value","CreateVisiteComponent","Component","constructor","props","displayTrame","match","params","dossierId","margin","width","display","padding","trameList","map","trame","key","_id","text","name","e","setState","displayMessage","message","marginTop","marginBottom","onSubmit","testEntries","visiteId","updateVisite","ETOB_RAISON_SOCIALE","ETOB_SIRET","VIS_DATE","VIS_OBSERVATIONS","VIS_MUTUALISEE","VIS_CPMM","AG_IDENT","controlesList","then","window","alert","history","push","DOSSIER_IDENT","postControlesByVisite","format","dossierText","visiteIdent","undefined","componentDidMount","toString","getVisiteById","controles","getControlesByVisite","getDossierById","i","dossierControle","concat","DOSSIER_LIBELLE","activiteText","ACDG_CODE_LIB_NIVEAU3","ident","CONTROLE_IDENT","exists","VISITE_IDENT","getAllDocs","res","catch","parseInt","length","render","textAlign","event","target","id","propTypes","func","isRequired","number","any","shape","string"],"mappings":"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","sourcesContent":["/* eslint-disable no-undef */\nimport React from 'react';\nimport {\n  Form,\n  Grid,\n  GridRow,\n  GridColumn,\n  TextArea,\n  Button,\n  Message,\n  Container,\n  Checkbox\n} from 'semantic-ui-react';\nimport { DateInput } from 'semantic-ui-calendar-react';\nimport { PropTypes } from 'prop-types';\nimport {\n  changeNameOfPage,\n  changeBackUrl,\n  changeActivePage\n} from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport PouchDbServices from '../../services';\nimport ControleComponent from './controles.container';\nimport EntrepriseField from '../../components/fields/entrepriseField.component';\nlet visitesService = PouchDbServices.services.visite;\nlet dossierService = PouchDbServices.services.dossier;\nconst moment = require('moment');\n\nfunction mapStateToProps(state) {\n  return {\n    agentIdent: state.dataReducer.AGENT_DD_IDENT\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: newName => dispatch(changeNameOfPage(newName)),\n    changeBackUrl: newBackUrl => dispatch(changeBackUrl(newBackUrl)),\n    changeActivePage: value => dispatch(changeActivePage('mesDossiers', value))\n  };\n}\n\nclass CreateVisiteComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      VIS_CPMM: false,\n      VIS_MUTUALISEE: false,\n      VIS_DATE: moment().format('DD-MM-YYYY'),\n      ETOB_RAISON_SOCIALE: '',\n      ETOB_SIRET: '',\n      VIS_OBSERVATIONS: '',\n      trame: '',\n      trameList: [{ _id: 0, name: 'Aucune trame' }],\n      controlesList: [],\n      message: '', //Message d'erreur si il y en a\n      DOSSIER_IDENT: -1,\n      dossierText: '',\n      visiteIdent: undefined, //Identifiant de la visite dans le cas de modification\n      visite: undefined //Visite dans le cas de modification\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.match.params.visiteId) {\n      //Si on est sur une page de modification de visite\n      this.props.changeNameOfPage('Modification de visite');\n      this.props.changeBackUrl(\n        '/visite/' + this.props.match.params.visiteId.toString()\n      );\n      this.props.changeActivePage(\n        '/modify-visite/' + this.props.match.params.visiteId\n      );\n      // On charge la visite et les controles correspondant\n      const visite = await visitesService.getVisiteById(\n        this.props.match.params.visiteId\n      );\n      const controles = await visitesService.getControlesByVisite(\n        this.props.match.params.visiteId\n      );\n      const dossier = await dossierService.getDossierById(\n        controles[0].DOSSIER_IDENT\n      ); //Dossier correspondant au premier contrôle (pour régler le dossier par défaut dans la création de controle)\n      let controlesList = [];\n      for (let i in controles) {\n        // On recrée la liste des controles de la visite\n        const dossierControle = await dossierService.getDossierById(\n          controles[i].DOSSIER_IDENT\n        ); //Dossier correspondant à la visite\n        controlesList = controlesList.concat([\n          {\n            ...controles[i],\n            dossierText: dossierControle.DOSSIER_LIBELLE,\n            activiteText: controles[i].ACDG_CODE_LIB_NIVEAU3,\n            ident: controles[i].CONTROLE_IDENT,\n            exists: true //indique que le contrôle existe déjà dans la base de données\n          }\n        ]);\n      }\n      this.setState({\n        ...visite,\n        controlesList,\n        message: '',\n        dossierText: dossier.DOSSIER_LIBELLE,\n        visiteIdent: visite.VISITE_IDENT,\n        DOSSIER_IDENT: dossier.DOSSIER_IDENT,\n        visite\n      });\n    } else {\n      //Si on est en création de visite\n      this.props.changeNameOfPage('Création de visite');\n      this.props.changeBackUrl('/dossier/' + this.props.match.params.dossierId);\n      this.props.changeActivePage(\n        '/nouvelle-visite/' + this.props.match.params.dossierId\n      );\n      PouchDbServices.services.trame\n        .getAllDocs()\n        .then(res => {\n          this.setState({ trameList: this.state.trameList.concat(res) });\n        })\n        .catch(() => {});\n      const dossier = await dossierService.getDossierById(\n        this.props.match.params.dossierId\n      );\n      this.setState({\n        dossierText: dossier.DOSSIER_LIBELLE,\n        DOSSIER_IDENT: parseInt(this.props.match.params.dossierId)\n      });\n    }\n  }\n\n  displayTrame = () => {\n    if (this.props.match.params.dossierId) {\n      return (\n        <Form.Group style={{ margin: 0 }}>\n          <Grid style={{ width: '100%', margin: 0 }} verticalAlign=\"bottom\">\n            <GridRow style={{ display: 'flex' }}>\n              <Grid.Column width={16} style={{ padding: 0 }}>\n                <Form.Select\n                  fluid\n                  placeholder=\"Trame\"\n                  label=\"Trame associée\"\n                  style={{ width: '100%' }}\n                  options={this.state.trameList.map(trame => ({\n                    key: trame._id,\n                    text: trame.name,\n                    value: trame\n                  }))}\n                  onChange={(e, { value }) => this.setState({ trame: value })}\n                />\n              </Grid.Column>\n            </GridRow>\n          </Grid>\n        </Form.Group>\n      );\n    }\n  };\n  displayMessage = message => {\n    if (message) {\n      return (\n        <Message\n          fluid\n          negative\n          onDismiss={() => this.setState({ message: '' })}\n          style={{ marginTop: '10px' }}\n        >\n          <Message.Header style={{ marginBottom: '5px' }}>\n            Validation Impossible\n          </Message.Header>\n          <Message.Content>{message}</Message.Content>\n        </Message>\n      );\n    }\n  };\n\n  testEntries() {\n    if (\n      !this.state.ETOB_RAISON_SOCIALE ||\n      !this.state.VIS_DATE ||\n      !this.state.trame\n    ) {\n      this.setState({\n        message: \"Veillez renseigner l'ensemble des champs obligatoires\"\n      });\n      return false;\n    }\n    if (this.state.ETOB_SIRET.length !== 14) {\n      this.setState({\n        message:\n          \"Le numéro SIRET renseigné n'est pas valide : il doit être composé de 14 chiffres\"\n      });\n      return false;\n    }\n    if (this.state.controlesList.length === 0) {\n      this.setState({\n        message:\n          'Veuillez rentrer au moins un contrôle. Vous pourrez le modifier par la suite si besoin'\n      });\n      return false;\n    }\n    return true;\n  }\n\n  onSubmit = () => {\n    if (this.testEntries()) {\n      if (this.props.match.params.visiteId) {\n        visitesService\n          .updateVisite(\n            {\n              ...this.state.visite,\n              ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n              ETOB_SIRET: this.state.ETOB_SIRET,\n              VIS_DATE: this.state.VIS_DATE,\n              VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n              VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n              VIS_CPMM: this.state.VIS_CPMM,\n              trame: this.state.trame,\n              AG_IDENT: this.props.agentIdent\n            },\n            this.state.controlesList\n          )\n          .then(() => {\n            window.alert('La visite a bien été modifiée.');\n            this.props.history.push('/dossier/' + this.state.DOSSIER_IDENT);\n          });\n      } else {\n        visitesService\n          .postControlesByVisite(\n            {\n              ETOB_RAISON_SOCIALE: this.state.ETOB_RAISON_SOCIALE,\n              ETOB_SIRET: this.state.ETOB_SIRET,\n              VIS_DATE: this.state.VIS_DATE,\n              VIS_OBSERVATIONS: this.state.VIS_OBSERVATIONS,\n              VIS_MUTUALISEE: this.state.VIS_MUTUALISEE,\n              VIS_CPMM: this.state.VIS_CPMM,\n              trame: this.state.trame,\n              AG_IDENT: this.props.agentIdent\n            },\n            this.state.controlesList\n          )\n          .then(() => {\n            window.alert('La visite a bien été ajoutée.');\n            this.props.history.push(\n              '/dossier/' + this.props.match.params.dossierId\n            );\n          });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <Container>\n        {this.displayMessage(this.state.message)}\n        <Grid style={{ margin: 'auto', textAlign: 'left' }} centered>\n          <GridRow>\n            <GridColumn width={14}>\n              <Form onSubmit={this.onSubmit}>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    control={Checkbox}\n                    label=\"CPMM\"\n                    onClick={() =>\n                      this.setState({ VIS_CPMM: !this.state.VIS_CPMM })\n                    }\n                    checked={this.state.VIS_CPMM}\n                  />\n                  <Form.Field\n                    control={Checkbox}\n                    label=\"Visite Mutualisée\"\n                    onClick={() =>\n                      this.setState({\n                        VIS_MUTUALISEE: !this.state.VIS_MUTUALISEE\n                      })\n                    }\n                    checked={this.state.VIS_MUTUALISEE}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <DateInput\n                    label=\"Date de la visite\"\n                    name=\"date\"\n                    placeholder=\"Date de la visite\"\n                    required\n                    value={this.state.VIS_DATE}\n                    iconPosition=\"right\"\n                    onChange={(event, { value }) =>\n                      this.setState({ VIS_DATE: value })\n                    }\n                  />\n                </Form.Group>\n                <EntrepriseField\n                  ETOB_SIRET={this.state.ETOB_SIRET}\n                  ETOB_RAISON_SOCIALE={this.state.ETOB_RAISON_SOCIALE}\n                  changeSiretValue={ETOB_SIRET => this.setState({ ETOB_SIRET })}\n                  changeRaisonSocialeValue={ETOB_RAISON_SOCIALE =>\n                    this.setState({ ETOB_RAISON_SOCIALE })\n                  }\n                />\n                {this.displayTrame()}\n                <Form.Group>\n                  <Form.Field width={16}>\n                    <TextArea\n                      placeholder=\"Observations\"\n                      onChange={e =>\n                        this.setState({ VIS_OBSERVATIONS: e.target.value })\n                      }\n                      value={this.state.VIS_OBSERVATIONS}\n                    />\n                  </Form.Field>\n                </Form.Group>\n              </Form>\n              <ControleComponent\n                dossier={{\n                  id: this.state.DOSSIER_IDENT,\n                  text: this.state.dossierText\n                }}\n                controles={this.state.controlesList}\n                changeControle={controlesList =>\n                  this.setState({ controlesList })\n                }\n              />\n              <Button style={{ marginTop: '20px' }} onClick={this.onSubmit}>\n                Valider\n              </Button>\n            </GridColumn>\n          </GridRow>\n        </Grid>\n      </Container>\n    );\n  }\n}\n\nCreateVisiteComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired,\n  agentIdent: PropTypes.number.isRequired,\n  history: PropTypes.any,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      dossierId: PropTypes.string,\n      visiteId: PropTypes.string\n    })\n  })\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CreateVisiteComponent);\n"]},"metadata":{},"sourceType":"module"}