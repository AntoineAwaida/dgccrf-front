{"ast":null,"code":"var _jsxFileName = \"/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/dossier/createVisite.container.js\";\n\n/* eslint-disable no-undef */\nimport React from 'react';\nimport { Form, Grid, GridRow, GridColumn, Icon } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { PropTypes } from 'prop-types';\nimport { changeNameOfPage, changeBackUrl, changeActivePage } from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport visitesService from '../../services/visite.service';\nimport dossierService from '../../services/dossier.service';\n\nfunction mapStateToProps() {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: newName => dispatch(changeNameOfPage(newName)),\n    changeBackUrl: newBackUrl => dispatch(changeBackUrl(newBackUrl)),\n    changeActivePage: () => dispatch(changeActivePage('mesDossiers', '/create-visite'))\n  };\n}\n\nclass CreateVisiteComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      actionList: ['123', '342', '1112'],\n      trameList: ['Trame 1', 'Trame 2'],\n      addedActions: [undefined]\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.changeNameOfPage('Création de visite');\n    this.props.changeBackUrl('/mes-dossiers'); // TODO : change for /dossier/:idDossier\n\n    this.props.changeActivePage();\n    dossierService.getAllActionCode().then(actionList => this.setState({\n      actionList\n    }));\n  }\n\n  onSubmit() {\n    if (this.state.addedActions.includes(undefined)) {\n      return window.alert('Veuillez spécifier un code action ou retirer les champs actions inutiles.');\n    }\n\n    visitesService.postControlesByVisite({\n      ETOB_RAISON_SOCIALE: this.state.enterpise,\n      ETOB_SIRET: this.state.SIRET,\n      trame: this.state.trame\n    }, this.state.addedActions).then(() => window.alert('La visite a bien été ajoutée.'));\n  }\n\n  render() {\n    return React.createElement(Grid, {\n      style: {\n        margin: 'auto',\n        textAlign: 'left'\n      },\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(GridRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(GridColumn, {\n      width: 14,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Etablissement\",\n      placeholder: \"Etablissement\",\n      onChange: e => this.setState({\n        enterpise: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      fluid: true,\n      label: \"SIRET\",\n      placeholder: \"SIRET\",\n      onChange: e => this.setState({\n        siret: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      style: {\n        width: '100%',\n        margin: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, this.state.addedActions.map((addedAction, actionIndex) => React.createElement(GridRow, {\n      key: addedAction,\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0',\n        margin: '0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(GridColumn, {\n      width: 14,\n      style: {\n        margin: 0,\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Form.Select, {\n      fluid: true,\n      placeholder: \"Action\",\n      label: actionIndex == 0 ? 'Actions associées' : undefined,\n      options: this.state.actionList.map(action => ({\n        key: action,\n        text: action,\n        value: action\n      })),\n      style: {\n        width: '100%'\n      },\n      value: this.state.addedActions[actionIndex],\n      onChange: (e, {\n        value\n      }) => {\n        let newActions = this.state.addedActions.map((el, i) => i === actionIndex ? value : el);\n        this.setState({\n          addedActions: newActions\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })), React.createElement(GridColumn, {\n      width: 1,\n      style: {\n        padding: 0,\n        marginLeft: '0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, actionIndex !== 0 && React.createElement(Icon, {\n      color: \"red\",\n      name: \"minus\",\n      size: \"big\",\n      style: {\n        cursor: 'pointer'\n      },\n      width: 1,\n      verticalAlign: \"bottom\",\n      onClick: () => {\n        let newActions = this.state.addedActions.filter((el, i) => i !== actionIndex);\n        this.setState({\n          addedActions: newActions\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        textAlign: 'center',\n        marginTop: '0.5em',\n        cursor: 'pointer'\n      },\n      onClick: () => {\n        let newActions = this.state.addedActions.map(el => el);\n        newActions.push(undefined);\n        this.setState({\n          addedActions: newActions\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"circle plus\",\n      size: \"big\",\n      color: \"green\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      style: {\n        margin: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      style: {\n        width: '100%',\n        margin: 0\n      },\n      verticalAlign: \"bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(GridRow, {\n      style: {\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      width: 14,\n      style: {\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Form.Select, {\n      fluid: true,\n      placeholder: \"Tr\\xE2me\",\n      label: \"Tr\\xE2me associ\\xE9e\",\n      style: {\n        width: '100%'\n      },\n      options: this.state.trameList.map(trame => ({\n        key: trame,\n        text: trame,\n        value: trame\n      })),\n      onChange: (e, {\n        value\n      }) => this.setState({\n        trame: value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    })), React.createElement(Grid.Column, {\n      width: 1,\n      style: {\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/nouvelle-trame\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        textAlign: 'center',\n        cursor: 'pointer',\n        paddingBottom: '0.3em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"plus\",\n      size: \"big\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }))))))), React.createElement(Form.Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Valider\")))));\n  }\n\n}\n\nCreateVisiteComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateVisiteComponent);","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/containers/dossier/createVisite.container.js"],"names":["React","Form","Grid","GridRow","GridColumn","Icon","Link","PropTypes","changeNameOfPage","changeBackUrl","changeActivePage","connect","visitesService","dossierService","mapStateToProps","mapDispatchToProps","dispatch","newName","newBackUrl","CreateVisiteComponent","Component","constructor","props","state","actionList","trameList","addedActions","undefined","onSubmit","bind","componentDidMount","getAllActionCode","then","setState","includes","window","alert","postControlesByVisite","ETOB_RAISON_SOCIALE","enterpise","ETOB_SIRET","SIRET","trame","render","margin","textAlign","e","target","value","siret","width","map","addedAction","actionIndex","display","alignItems","padding","action","key","text","newActions","el","i","marginLeft","cursor","filter","marginTop","push","paddingBottom","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable no-undef */\nimport React from 'react';\nimport { Form, Grid, GridRow, GridColumn, Icon } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { PropTypes } from 'prop-types';\nimport {\n  changeNameOfPage,\n  changeBackUrl,\n  changeActivePage\n} from '../navbar/actions';\nimport { connect } from 'react-redux';\nimport visitesService from '../../services/visite.service';\nimport dossierService from '../../services/dossier.service';\n\nfunction mapStateToProps() {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeNameOfPage: newName => dispatch(changeNameOfPage(newName)),\n    changeBackUrl: newBackUrl => dispatch(changeBackUrl(newBackUrl)),\n    changeActivePage: () =>\n      dispatch(changeActivePage('mesDossiers', '/create-visite'))\n  };\n}\n\nclass CreateVisiteComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      actionList: ['123', '342', '1112'],\n      trameList: ['Trame 1', 'Trame 2'],\n      addedActions: [undefined]\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.changeNameOfPage('Création de visite');\n    this.props.changeBackUrl('/mes-dossiers'); // TODO : change for /dossier/:idDossier\n    this.props.changeActivePage();\n    dossierService\n      .getAllActionCode()\n      .then(actionList => this.setState({ actionList }));\n  }\n\n  onSubmit() {\n    if (this.state.addedActions.includes(undefined)) {\n      return window.alert(\n        'Veuillez spécifier un code action ou retirer les champs actions inutiles.'\n      );\n    }\n    visitesService\n      .postControlesByVisite(\n        {\n          ETOB_RAISON_SOCIALE: this.state.enterpise,\n          ETOB_SIRET: this.state.SIRET,\n          trame: this.state.trame\n        },\n        this.state.addedActions\n      )\n      .then(() => window.alert('La visite a bien été ajoutée.'));\n  }\n\n  render() {\n    return (\n      <Grid style={{ margin: 'auto', textAlign: 'left' }} centered>\n        <GridRow>\n          <GridColumn width={14}>\n            <Form onSubmit={this.onSubmit}>\n              <Form.Group widths=\"equal\">\n                <Form.Input\n                  fluid\n                  label=\"Etablissement\"\n                  placeholder=\"Etablissement\"\n                  onChange={e => this.setState({ enterpise: e.target.value })}\n                />\n\n                <Form.Input\n                  fluid\n                  label=\"SIRET\"\n                  placeholder=\"SIRET\"\n                  onChange={e => this.setState({ siret: e.target.value })}\n                />\n              </Form.Group>\n\n              <Grid style={{ width: '100%', margin: 0 }}>\n                {this.state.addedActions.map((addedAction, actionIndex) => (\n                  <GridRow\n                    key={addedAction}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      padding: '0',\n                      margin: '0'\n                    }}\n                  >\n                    <GridColumn width={14} style={{ margin: 0, padding: 0 }}>\n                      <Form.Select\n                        fluid\n                        placeholder=\"Action\"\n                        label={\n                          actionIndex == 0 ? 'Actions associées' : undefined\n                        }\n                        options={this.state.actionList.map(action => ({\n                          key: action,\n                          text: action,\n                          value: action\n                        }))}\n                        style={{ width: '100%' }}\n                        value={this.state.addedActions[actionIndex]}\n                        onChange={(e, { value }) => {\n                          let newActions = this.state.addedActions.map(\n                            (el, i) => (i === actionIndex ? value : el)\n                          );\n                          this.setState({ addedActions: newActions });\n                        }}\n                      />\n                    </GridColumn>\n                    <GridColumn\n                      width={1}\n                      style={{ padding: 0, marginLeft: '0' }}\n                    >\n                      {actionIndex !== 0 && (\n                        <Icon\n                          color=\"red\"\n                          name=\"minus\"\n                          size=\"big\"\n                          style={{ cursor: 'pointer' }}\n                          width={1}\n                          verticalAlign=\"bottom\"\n                          onClick={() => {\n                            let newActions = this.state.addedActions.filter(\n                              (el, i) => i !== actionIndex\n                            );\n                            this.setState({ addedActions: newActions });\n                          }}\n                        />\n                      )}\n                    </GridColumn>\n                  </GridRow>\n                ))}\n              </Grid>\n\n              <div\n                style={{\n                  width: '100%',\n                  textAlign: 'center',\n                  marginTop: '0.5em',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  let newActions = this.state.addedActions.map(el => el);\n                  newActions.push(undefined);\n                  this.setState({ addedActions: newActions });\n                }}\n              >\n                <Icon name=\"circle plus\" size=\"big\" color=\"green\" />\n              </div>\n\n              <Form.Group style={{ margin: 0 }}>\n                <Grid\n                  style={{ width: '100%', margin: 0 }}\n                  verticalAlign=\"bottom\"\n                >\n                  <GridRow style={{ display: 'flex' }}>\n                    <Grid.Column width={14} style={{ padding: 0 }}>\n                      <Form.Select\n                        fluid\n                        placeholder=\"Trâme\"\n                        label=\"Trâme associée\"\n                        style={{ width: '100%' }}\n                        options={this.state.trameList.map(trame => ({\n                          key: trame,\n                          text: trame,\n                          value: trame\n                        }))}\n                        onChange={(e, { value }) =>\n                          this.setState({ trame: value })\n                        }\n                      />\n                    </Grid.Column>\n\n                    <Grid.Column width={1} style={{ padding: 0 }}>\n                      <Link to=\"/nouvelle-trame\">\n                        <div\n                          style={{\n                            width: '100%',\n                            textAlign: 'center',\n                            cursor: 'pointer',\n                            paddingBottom: '0.3em'\n                          }}\n                        >\n                          <Icon name=\"plus\" size=\"big\" />\n                        </div>\n                      </Link>\n                    </Grid.Column>\n                  </GridRow>\n                </Grid>\n              </Form.Group>\n\n              <Form.Button>Valider</Form.Button>\n            </Form>\n          </GridColumn>\n        </GridRow>\n      </Grid>\n    );\n  }\n}\n\nCreateVisiteComponent.propTypes = {\n  changeNameOfPage: PropTypes.func.isRequired,\n  changeBackUrl: PropTypes.func.isRequired,\n  changeActivePage: PropTypes.func.isRequired\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CreateVisiteComponent);\n"]},"metadata":{},"sourceType":"module"}