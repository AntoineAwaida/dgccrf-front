{"ast":null,"code":"var _jsxFileName = \"/Users/antoine/Documents/DGCCRF/dgccrf-front/src/components/fields/entrepriseField.component.js\";\n\n/* eslint-disable no-undef */\n\n/* eslint-disable no-console */\nimport React from 'react';\nimport { Form, Select } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport config from '../../config';\nexport default class EntrepriseField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchResults: []\n    };\n  }\n\n  async changeSearchResults(searchText) {\n    try {\n      let _ref = await axios.get(config.backend.base_url + '/entreprise/search?query=' + searchText),\n          data = _ref.data;\n\n      this.setState({\n        searchResults: data.map(etab => ({\n          key: etab.ETOB_SIRET,\n          value: [etab.ETOB_SIRET, etab.ETOB_IDENT],\n          text: etab.ETOB_RAISON_SOCIALE\n        }))\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      fluid: true,\n      control: Select,\n      search: true,\n      options: this.state.searchResults.concat([{\n        key: this.props.ETOB_SIRET,\n        value: [this.props.ETOB_SIRET, this.props.ETOB_IDENT],\n        text: this.props.ETOB_RAISON_SOCIALE\n      }]),\n      required: true,\n      label: \"Raison Sociale\",\n      placeholder: \"Rechercher\",\n      onSearchChange: (e, data) => {\n        this.changeSearchResults(data.searchQuery);\n        this.props.changeRaisonSocialeValue(data.searchQuery);\n      },\n      onChange: (e, data) => {\n        this.props.changeRaisonSocialeValue(e.currentTarget.innerText);\n        this.props.changeSiretValue(data.value[0]);\n        this.props.changeEtabIdentValue(data.value[1]);\n      },\n      value: [this.props.ETOB_SIRET, this.props.ETOB_IDENT],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      fluid: true,\n      required: true,\n      label: \"SIRET\",\n      placeholder: \"SIRET\",\n      onChange: e => this.props.changeSiretValue(e.target.value),\n      value: this.props.ETOB_SIRET,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }));\n  }\n\n}\nEntrepriseField.propTypes = {\n  ETOB_RAISON_SOCIALE: PropTypes.string.isRequired,\n  ETOB_SIRET: PropTypes.string.isRequired,\n  ETOB_IDENT: PropTypes.string.isRequired,\n  changeSiretValue: PropTypes.func.isRequired,\n  changeRaisonSocialeValue: PropTypes.func.isRequired,\n  changeEtabIdentValue: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/components/fields/entrepriseField.component.js"],"names":["React","Form","Select","PropTypes","axios","config","EntrepriseField","Component","constructor","props","state","searchResults","changeSearchResults","searchText","get","backend","base_url","data","setState","map","etab","key","ETOB_SIRET","value","ETOB_IDENT","text","ETOB_RAISON_SOCIALE","e","console","log","render","concat","searchQuery","changeRaisonSocialeValue","currentTarget","innerText","changeSiretValue","changeEtabIdentValue","target","propTypes","string","isRequired","func"],"mappings":"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","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-console */\nimport React from 'react';\nimport { Form, Select } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport config from '../../config';\n\nexport default class EntrepriseField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchResults: []\n    };\n  }\n\n  async changeSearchResults(searchText) {\n    try {\n      let { data } = await axios.get(\n        config.backend.base_url + '/entreprise/search?query=' + searchText\n      );\n      this.setState({\n        searchResults: data.map(etab => ({\n          key: etab.ETOB_SIRET,\n          value: [etab.ETOB_SIRET, etab.ETOB_IDENT],\n          text: etab.ETOB_RAISON_SOCIALE\n        }))\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return (\n      <Form.Group widths=\"equal\">\n        <Form.Field\n          fluid\n          control={Select}\n          search\n          options={this.state.searchResults.concat([\n            {\n              key: this.props.ETOB_SIRET,\n              value: [this.props.ETOB_SIRET, this.props.ETOB_IDENT],\n              text: this.props.ETOB_RAISON_SOCIALE\n            }\n          ])}\n          required\n          label=\"Raison Sociale\"\n          placeholder=\"Rechercher\"\n          onSearchChange={(e, data) => {\n            this.changeSearchResults(data.searchQuery);\n            this.props.changeRaisonSocialeValue(data.searchQuery);\n          }}\n          onChange={(e, data) => {\n            this.props.changeRaisonSocialeValue(e.currentTarget.innerText);\n            this.props.changeSiretValue(data.value[0]);\n            this.props.changeEtabIdentValue(data.value[1]);\n          }}\n          value={[this.props.ETOB_SIRET, this.props.ETOB_IDENT]}\n        />\n        <Form.Input\n          fluid\n          required\n          label=\"SIRET\"\n          placeholder=\"SIRET\"\n          onChange={e => this.props.changeSiretValue(e.target.value)}\n          value={this.props.ETOB_SIRET}\n        />\n      </Form.Group>\n    );\n  }\n}\n\nEntrepriseField.propTypes = {\n  ETOB_RAISON_SOCIALE: PropTypes.string.isRequired,\n  ETOB_SIRET: PropTypes.string.isRequired,\n  ETOB_IDENT: PropTypes.string.isRequired,\n  changeSiretValue: PropTypes.func.isRequired,\n  changeRaisonSocialeValue: PropTypes.func.isRequired,\n  changeEtabIdentValue: PropTypes.func.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}