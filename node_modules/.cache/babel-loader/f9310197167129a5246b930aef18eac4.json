{"ast":null,"code":"var _jsxFileName = \"/Users/antoine/Documents/DGCCRF/dgccrf-front/src/components/fields/codes.component.js\";\nimport React from 'react';\nimport { Form, Select } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport PouchDbServices from '../../services';\nlet activiteService = PouchDbServices.services.activite;\nlet cpfService = PouchDbServices.services.cpf;\nexport default class CodesField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activites: [],\n      cpf: []\n    };\n  }\n\n  loadActivites(activites) {\n    const newActivites = activites.filter(activite => activite.ACDG_ENQUETE_FLAG === 1 && !activite.ACDG_CODE_LIB_NIVEAU3.includes('[Obsolet]')).map(activite => {\n      return {\n        key: activite.ACDG_IDENT,\n        text: activite.ACDG_CODE_LIB_NIVEAU3,\n        value: activite.ACDG_IDENT\n      };\n    });\n    this.setState({\n      activites: newActivites\n    });\n  }\n\n  loadCpf(cpf) {\n    const newcpf = cpf.filter(codeCpf => !codeCpf.CPF_CODE_LIBELLE.includes('[Obsolet]')).map(cpf => {\n      return {\n        key: cpf.CPF_IDENT,\n        text: cpf.CPF_CODE_LIBELLE,\n        value: cpf.CPF_IDENT\n      };\n    });\n    this.setState({\n      cpf: newcpf\n    });\n  }\n\n  componentDidMount() {\n    activiteService.getAllDocs().then(res => this.loadActivites(res));\n    cpfService.getAllDocs().then(res => this.loadCpf(res));\n  }\n\n  render() {\n    return React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      required: true,\n      lazyLoad: true,\n      control: Select,\n      options: this.state.activites,\n      label: \"Code DG\",\n      placeholder: \"Code DG\",\n      search: true,\n      defaultValue: this.props.ACDG_IDENT,\n      onChange: this.props.activiteChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      lazyLoad: true,\n      required: true,\n      control: Select,\n      options: this.state.cpf,\n      label: \"Code CPF\",\n      placeholder: \"Code CPF\",\n      search: true,\n      defaultValue: this.props.CPF_IDENT,\n      onChange: this.props.cpfChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n  }\n\n}\nCodesField.propTypes = {\n  activiteChange: PropTypes.func.isRequired,\n  cpfChange: PropTypes.func.isRequired,\n  ACDG_IDENT: PropTypes.number.isRequired,\n  CPF_IDENT: PropTypes.number.isRequired\n};","map":{"version":3,"sources":["/Users/antoine/Documents/DGCCRF/dgccrf-front/src/components/fields/codes.component.js"],"names":["React","Form","Select","PropTypes","PouchDbServices","activiteService","services","activite","cpfService","cpf","CodesField","Component","constructor","props","state","activites","loadActivites","newActivites","filter","ACDG_ENQUETE_FLAG","ACDG_CODE_LIB_NIVEAU3","includes","map","key","ACDG_IDENT","text","value","setState","loadCpf","newcpf","codeCpf","CPF_CODE_LIBELLE","CPF_IDENT","componentDidMount","getAllDocs","then","res","render","activiteChange","cpfChange","propTypes","func","isRequired","number"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Select } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport PouchDbServices from '../../services';\nlet activiteService = PouchDbServices.services.activite;\nlet cpfService = PouchDbServices.services.cpf;\n\nexport default class CodesField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activites: [],\n      cpf: []\n    };\n  }\n  loadActivites(activites) {\n    const newActivites = activites\n      .filter(\n        activite =>\n          activite.ACDG_ENQUETE_FLAG === 1 &&\n          !activite.ACDG_CODE_LIB_NIVEAU3.includes('[Obsolet]')\n      )\n      .map(activite => {\n        return {\n          key: activite.ACDG_IDENT,\n          text: activite.ACDG_CODE_LIB_NIVEAU3,\n          value: activite.ACDG_IDENT\n        };\n      });\n    this.setState({ activites: newActivites });\n  }\n  loadCpf(cpf) {\n    const newcpf = cpf\n      .filter(codeCpf => !codeCpf.CPF_CODE_LIBELLE.includes('[Obsolet]'))\n      .map(cpf => {\n        return {\n          key: cpf.CPF_IDENT,\n          text: cpf.CPF_CODE_LIBELLE,\n          value: cpf.CPF_IDENT\n        };\n      });\n    this.setState({ cpf: newcpf });\n  }\n\n  componentDidMount() {\n    activiteService.getAllDocs().then(res => this.loadActivites(res));\n    cpfService.getAllDocs().then(res => this.loadCpf(res));\n  }\n\n  render() {\n    return (\n      <Form.Group widths=\"equal\">\n        <Form.Field\n          required\n          lazyLoad\n          control={Select}\n          options={this.state.activites}\n          label=\"Code DG\"\n          placeholder=\"Code DG\"\n          search\n          defaultValue={this.props.ACDG_IDENT}\n          onChange={this.props.activiteChange}\n        />\n        <Form.Field\n          lazyLoad\n          required\n          control={Select}\n          options={this.state.cpf}\n          label=\"Code CPF\"\n          placeholder=\"Code CPF\"\n          search\n          defaultValue={this.props.CPF_IDENT}\n          onChange={this.props.cpfChange}\n        />\n      </Form.Group>\n    );\n  }\n}\n\nCodesField.propTypes = {\n  activiteChange: PropTypes.func.isRequired,\n  cpfChange: PropTypes.func.isRequired,\n  ACDG_IDENT: PropTypes.number.isRequired,\n  CPF_IDENT: PropTypes.number.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}